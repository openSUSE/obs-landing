<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Basic OBS Workflow | User Guide</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 2.4.0 using SUSE XSL Stylesheets 2.0.8 (based on DocBook XSL Stylesheets 1.78.1) - chunked" /><meta name="book-title" content="User Guide" /><meta name="chapter-title" content="Chapter 4. Basic OBS Workflow" /><link rel="home" href="index.html" title="OBS Documentation" /><link rel="up" href="par.working.html" title="Part III. Usage" /><link rel="prev" href="par.working.html" title="Part III. Usage" /><link rel="next" href="cha.obs.building.html" title="Chapter 5. Building Package Formats" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="User Guide"><span class="book-icon">User Guide</span></a><span> › </span><a class="crumb" href="par.working.html">Usage</a><span> › </span><a class="crumb" href="cha.obs.basicworkflow.html">Basic OBS Workflow</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>User Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="bk02pr01.html"><span class="number"> </span><span class="name">About this Guide</span></a></li><li class="inactive"><a href="par.concepts.html"><span class="number">I </span><span class="name">Concepts</span></a><ol><li class="inactive"><a href="cha.obs.package_formats.html"><span class="number">1 </span><span class="name">Supported Build Recipes and Package Formats</span></a></li></ol></li><li class="inactive"><a href="bk02pt02.html"><span class="number">II </span><span class="name">Setup</span></a><ol><li class="inactive"><a href="cha.obs.osc.html"><span class="number">2 </span><span class="name">osc, the Command Line Tool</span></a></li><li class="inactive"><a href="cha.obs.prjconfig.html"><span class="number">3 </span><span class="name">Project Configuration</span></a></li></ol></li><li class="inactive"><a href="par.working.html"><span class="number">III </span><span class="name">Usage</span></a><ol><li class="inactive"><a href="cha.obs.basicworkflow.html"><span class="number">4 </span><span class="name">Basic OBS Workflow</span></a></li><li class="inactive"><a href="cha.obs.building.html"><span class="number">5 </span><span class="name">Building Package Formats</span></a></li><li class="inactive"><a href="cha.obs.source_service.html"><span class="number">6 </span><span class="name">Using Source Services</span></a></li></ol></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Part III. Usage" href="par.working.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 5. Building Package Formats" href="cha.obs.building.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="User Guide"><span class="book-icon">User Guide</span></a><span> › </span><a class="crumb" href="par.working.html">Usage</a><span> › </span><a class="crumb" href="cha.obs.basicworkflow.html">Basic OBS Workflow</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Part III. Usage" href="par.working.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 5. Building Package Formats" href="cha.obs.building.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class=""><div class="documentation"><div class="chapter " id="cha.obs.basicworkflow"><div class="titlepage"><div><div><h2 class="title"><span class="number">4 </span><span class="name">Basic OBS Workflow</span> </h2></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.setuphome"><span class="number">4.1 </span><span class="name">Setting Up Your Home Project</span></a></span></dt><dt><span class="sect1"><a href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.create-new"><span class="number">4.2 </span><span class="name">Creating a New Package</span></a></span></dt><dt><span class="sect1"><a href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.builderrors"><span class="number">4.3 </span><span class="name">Investigating the Local Build Process</span></a></span></dt><dt><span class="sect1"><a href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.add-dependencies"><span class="number">4.4 </span><span class="name">Adding Dependencies to Your Project</span></a></span></dt></dl></div></div>
 
 
 

 <div class="sect1 " id="sec.obs.basicworkflow.setuphome"><div class="titlepage"><div><div><h2 class="title" id="sec.obs.basicworkflow.setuphome"><span class="number">4.1 </span><span class="name">Setting Up Your Home Project</span> <a title="Permalink" class="permalink" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.setuphome">#</a></h2></div></div></div>
  
  
  <p>
   This section shows how to set up your home project with the command line
   tool <code class="command">osc</code>. For more
   information about setting up your home project with the Web UI, see
   <span class="intraxref">Article “Beginnerʼs Guide”, Section 6 “Setting Up Your Home Project for the First Time”</span>.
  </p>
  <p>
   This chapter is based on the following assumptions:
  </p>
  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
    <p>
     You have an account on an Open Build Service instance. To create an account, use the
     Web UI.
    </p>
   </li><li class="listitem ">
    <p>
     You have installed <code class="command">osc</code> as described in <a class="xref" href="cha.obs.osc.html#sec.obs.osc.install" title="2.1. Installing and Configuring">Section 2.1, “Installing and Configuring”</a>.
    </p>
   </li><li class="listitem ">
    <p>
     You have configured <code class="command">osc</code> as described in <a class="xref" href="cha.obs.osc.html#sec.osc.firsttime" title="2.3.2. Using osc for the First Time">Section 2.3.2, “Using <code class="command">osc</code> for the First Time”</a>.
    </p>
   </li></ul></div>

  <div class="procedure " id="idm139937490688384"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 4.1: </span><span class="name">Setting Up Your Home Project </span><a title="Permalink" class="permalink" href="cha.obs.basicworkflow.html#idm139937490688384">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step " id="st.basicworkflow.setuphome.oscls">
    <p>
     Get a list of all available build targets of your OBS instance:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> ls /</pre></div>
    <p>
     For example, on the openSUSE Build Service, build targets will include distributions
     such as
     <code class="uri">openSUSE:Tumbleweed</code>,
     <code class="uri">openSUSE:Leap:<em class="replaceable ">VERSION</em></code>,
     <code class="uri">openSUSE:Tools</code>, <code class="uri">openSUSE:Templates</code>.
    </p>
   </li><li class="step " id="st.obs.metaprj">
    <p>
     Configure your build targets with:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> meta prj --edit home:obsgeeko</pre></div>
    <p>The previous command shows a XML structure like this:</p>
    
    <div class="example" id="idm139937490679328"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 4.1: </span><span class="name">XML Structure of Build Service Metadata </span><a title="Permalink" class="permalink" href="cha.obs.basicworkflow.html#idm139937490679328">#</a></h6></div><div class="example-contents">
     
     <div class="verbatim-wrap highlight xml"><pre class="screen">&lt;project name="home:obsgeeko"&gt;
  &lt;title&gt;obsgeeko's Home Project&lt;/title&gt;
  &lt;description&gt;A description of the project.&lt;/description&gt;
  &lt;person userid="obsgeeko" role="bugowner"/&gt;
  &lt;!-- contains other OBS users --&gt;
  &lt;debuginfo&gt;
    &lt;enable repository="openSUSE_Factory"/&gt;
  &lt;/debuginfo&gt;
  &lt;!-- add &lt;repository&gt; elements here --&gt;
&lt;/project&gt;</pre></div>
    </div></div>
   </li><li class="step ">
    <p>
     To add build targets, use the <code class="sgmltag-element">repository</code> element. For
     example, on openSUSE Build Service, you can add the build targets openSUSE Tumbleweed for x86 and
     x86-64 with:
    </p>
    <div class="verbatim-wrap highlight xml"><pre class="screen">&lt;repository name="openSUSE_Tumbleweed"&gt;
    &lt;path project="openSUSE:Tumbleweed" repository="standard"/&gt;
    &lt;arch&gt;i586&lt;/arch&gt;
    &lt;arch&gt;x86_64&lt;/arch&gt;
&lt;/repository&gt;</pre></div>
   </li><li class="step ">
    <p>
     Add more <code class="sgmltag-element">repository</code> elements as needed.  Insert the information
     from <a class="xref" href="cha.obs.basicworkflow.html#st.basicworkflow.setuphome.oscls" title="Step 1">Step 1</a> into the
     <code class="sgmltag-attribute">project</code> attribute.
    </p>
    
    <p>
     On openSUSE Build Service, you can normally use the attribute
     <code class="sgmltag-attribute">repository</code> with the value
     <code class="sgmltag-attvalue">standard</code>.
     For example, to add openSUSE Leap as a build target, create an entry like:
    </p>
    
    
    <div class="verbatim-wrap highlight xml"><pre class="screen">&lt;repository name="openSUSE_Leap_42.3"&gt;
    &lt;path project="openSUSE:Leap:42.3" repository="standard"/&gt;
    &lt;arch&gt;i586&lt;/arch&gt;
    &lt;arch&gt;x86_64&lt;/arch&gt;
&lt;/repository&gt;</pre></div>
   </li><li class="step ">
    <p>
     Save the file (or leave it untouched).
    </p>
    <p>
     <code class="command">osc</code> will check if the new configuration is valid XML. If the file
     is valid, <code class="command">osc</code> will save it. Otherwise, it will show an error and
     prompt you whether to <span class="guimenu">Try again?</span>. In this case, press
     <span class="keycap">n</span>. Your changes will be lost and you will need to start
     from <a class="xref" href="cha.obs.basicworkflow.html#st.obs.metaprj" title="Step 2">Step 2</a> again.
    </p>
   </li></ol></div></div>
  <p>
   After a while, the defined build targets show up in your home project.
  </p>
 </div>

 <div class="sect1 " id="sec.obs.basicworkflow.create-new"><div class="titlepage"><div><div><h2 class="title" id="sec.obs.basicworkflow.create-new"><span class="number">4.2 </span><span class="name">Creating a New Package</span> <a title="Permalink" class="permalink" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.create-new">#</a></h2></div></div></div>
  
  <p>
   This section covers how to create packages from a project hosted on GitHub
   (the <span class="quote">“<span class="quote">upstream project</span>”</span>). We assume that this project contains source code
   which you want to package for different SUSE distributions.
   We assume the setup of your home project in your OBS instance is
   already done. If not, refer to <a class="xref" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.setuphome" title="4.1. Setting Up Your Home Project">Section 4.1, “Setting Up Your Home Project”</a>.
  </p>
  <p>
   To create a package from an upstream project, do the following:
  </p>
  <div class="procedure " id="idm139937490659920"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 4.2: </span><span class="name">General Procedure to Build a RPM Package </span><a title="Permalink" class="permalink" href="cha.obs.basicworkflow.html#idm139937490659920">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step ">
    <p>
     Open a shell. Choose or create a directory on your system in a partition
     that has enough space to hold the package sources.
    </p>
   </li><li class="step ">
    <p>
     Prepare your <em class="firstterm ">working directory</em>.
     These steps only have to be performed once:
    </p>
    <ol type="a" class="substeps ">
     <li class="step ">
    <p>
     Check out your home project:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> checkout home:obsgeeko</pre></div>
    <p>
     This will create <code class="filename">home:obsgeeko</code> in the
     current directory.
    </p>
   </li>
   <li class="step ">
    <p>Create a new package inside your local working directory:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">cd</code> home:obsgeeko
<code class="prompt user">geeko &gt; </code><code class="command">osc</code> mkpac <em class="replaceable ">YOUR_PROJECT</em></pre></div>
   </li>
   </ol>
   </li><li class="step ">
    <p>
     Download the source of the upstream project and save it in
     <code class="filename">home:obsgeeko/<em class="replaceable ">YOUR_PROJECT</em></code>.
    </p>
   </li><li class="step ">
    <p>
     Create a <em class="firstterm ">spec file</em> which
     contains metadata and build instructions.
     For more information about spec files, see
     <a class="ulink" href="https://rpm-guide.readthedocs.io/en/latest/" target="_blank">https://rpm-guide.readthedocs.io/en/latest/</a>.
    </p>
    
   </li><li class="step ">
    <p>Create a new changelog and add your changes:</p>
    <ol type="a" class="substeps ">
     <li class="step ">
      <p>
       To create a new changelog file or to update an existing changelog file
       with <code class="command">osc</code>, use:
      </p>
      <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> vc</pre></div>
      <p>The command will open an editor with the following content:</p>
      <div class="verbatim-wrap"><pre class="screen">-------------------------------------------------------------------
Fri Aug 23 08:42:42 UTC 2017 - <code class="systemitem">geeko</code>@example.com</pre></div>
     </li>
     <li class="step ">
      <p>Enter your changes in the editor.</p>
      <p>
       Usually, changelog entries contain a high-level overview like:
      </p>
      
      <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
        <p>
         <span class="formalpara-title">Version Updates. </span>
         
          Provide a general overview of new features or changes in behavior
          of the package.
         
        </p>
       </li><li class="listitem ">
        <p>
         <span class="formalpara-title">Bug and Security Fixes. </span>
         
          If a bug was fixed, mention the bug number.
          Most projects have policies or conventions for abbreviating bug
          numbers, so there is no need to add a long URL.
         
        </p>
        <p>
         For example, in openSUSE Build Service, <code class="literal">boo#</code> is used for bugs
         on <a class="ulink" href="https://bugzilla.opensuse.org" target="_blank">https://bugzilla.opensuse.org</a> and
         <code class="literal">fate#</code> is used for features on
         <a class="ulink" href="https://fate.opensuse.org" target="_blank">https://fate.opensuse.org</a>.
        </p>
       </li><li class="listitem ">
        <p>
         <span class="formalpara-title">Incompatible Changes. </span>
         
          Mention incompatible changes, such as API changes, that affect
          users or other developers creating extensions of your package.
         
        </p>
        
       </li><li class="listitem ">
        <p>
         <span class="formalpara-title">Distribution-Related Changes. </span>
         
          Mention any changes in the package structure, package names,
          and additions or removals of patch files or <span class="quote">“<span class="quote">hacks</span>”</span>.
         
        </p>
       </li></ul></div>
      <p>
       For more information about changelogs, see <a class="ulink" href="https://en.opensuse.org/openSUSE:Creating_a_changes_file_(RPM)" target="_blank">https://en.opensuse.org/openSUSE:Creating_a_changes_file_(RPM)</a>.
      </p>
     </li>
    </ol>
   </li><li class="step ">
    <p>Add all the files to your working directory:</p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> add *.spec *.changes *.tar.gz</pre></div>
   </li><li class="step ">
    <p>Build the package for a specific distribution and architecture,
     for example, openSUSE Tumbleweed for x86-64:</p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> build --local-package openSUSE_Tumbleweed x86_64 *.spec</pre></div>
    <p>
     If you encounter problems, see <a class="xref" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.builderrors" title="4.3. Investigating the Local Build Process">Section 4.3, “Investigating the Local Build Process”</a>.
    </p>
   </li><li class="step ">
    <p>
     Check if your build was successful. If everything was fine, commit the
     files to your package to your home project on OBS:</p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> commit</pre></div>
   </li></ol></div></div>
 </div>

 <div class="sect1 " id="sec.obs.basicworkflow.builderrors"><div class="titlepage"><div><div><h2 class="title" id="sec.obs.basicworkflow.builderrors"><span class="number">4.3 </span><span class="name">Investigating the Local Build Process</span> <a title="Permalink" class="permalink" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.builderrors">#</a></h2></div></div></div>
  
  
  <p>
   It is hard to describe a general procedure when you encounter a build
   error. Most build errors are very specific to the package being built.
   However, there are generic tools that often help:
  </p>
  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
    <p><a class="xref" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.builderrors.buildlog" title="4.3.1. Build Log">Section 4.3.1, “Build Log”</a></p>
   </li><li class="listitem ">
    <p><a class="xref" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.builderrors.buildroot" title="4.3.2. Local Build Root Directory">Section 4.3.2, “Local Build Root Directory”</a></p>
   </li></ul></div>

  

  <div class="sect2 " id="sec.obs.basicworkflow.builderrors.buildlog"><div class="titlepage"><div><div><h3 class="title" id="sec.obs.basicworkflow.builderrors.buildlog"><span class="number">4.3.1 </span><span class="name">Build Log</span> <a title="Permalink" class="permalink" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.builderrors.buildlog">#</a></h3></div></div></div>
   
   <p>
    Each build produces a log file on OBS. This log file can be viewed by
    the <code class="command">buildlog</code> (or <code class="command">bl</code>) subcommand.
    It needs a build target which is the distribution and the architecture.
   </p>
   <p>
    For example, to view the build log of your current project
    for openSUSE Tumbleweed on a x86-64 architecture, use:
    use:
   </p>
   <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> buildlog openSUSE_Tumbleweed x86_64</pre></div>
   <p>
    However, this command will print the complete build log which could be
    difficult to spot the errors. Use the <code class="command">buildlogtail</code>
    subcommand to show only the end of the log file:
   </p>
   <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> buildlogtail openSUSE_Tumbleweed x86_64</pre></div>
   <p>
    Additionally, the <code class="command">osc</code> creates some build log files in the build
    directory <code class="filename">/var/tmp/build-root/</code>:
   </p>
   <div class="variablelist "><dl class="variablelist"><dt id="idm139937490604400"><span class="term "><code class="filename">.build.log</code></span></dt><dd>
      <p>Contains the log.</p>
     </dd><dt id="idm139937490602384"><span class="term "><code class="filename">.build.command</code></span></dt><dd>
      <p>
       Contains the command which is used to build the package. For RPM-like
       systems it is <code class="command">rpmbuild</code> <code class="option">-ba <em class="replaceable ">PACKAGE</em>.spec</code>.
      </p>
     </dd><dt id="idm139937490598640"><span class="term "><code class="filename">.build.packages</code></span></dt><dd>
      <p>
       Contains the path to all object files.
      </p>
     </dd></dl></div>
  </div>

  <div class="sect2 " id="sec.obs.basicworkflow.builderrors.buildroot"><div class="titlepage"><div><div><h3 class="title" id="sec.obs.basicworkflow.builderrors.buildroot"><span class="number">4.3.2 </span><span class="name">Local Build Root Directory</span> <a title="Permalink" class="permalink" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.builderrors.buildroot">#</a></h3></div></div></div>
   
   <p>
    If you build a package locally and you get a build error, investigate
    the problems in the build root directory directly. This is sometimes
    easier and more effective than only looking at the build log.
   </p>
   <p>
    By default, the directory <code class="filename">/var/tmp/build-root/</code>
    is used as the <span class="emphasis"><em>build root</em></span>. This is defined in
    the configuration file <code class="filename">~/.oscrc</code> using the
    key <code class="option">build-root</code>.
   </p>
   <p>
    Each combination of distribution and architecture has its own build
    root. To change into the build root for openSUSE Tumbleweed on the
    x86-64 architecture, use the following command:
   </p>
   <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> chroot openSUSE_Tumbleweed x86_64</pre></div>
   <p>
    When prompted, enter the <code class="systemitem">root</code> password.
   </p>
   <p>
    Your shell will then change to the directory
    <code class="filename">/home/abuild</code> belonging to the user
    <code class="systemitem">abuild</code> in group <code class="systemitem">abuild</code>.
   </p>
   
   <p>
    The build root contains the following structure:
   </p>
   <div class="example" id="exa.workflow.buildroot"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 4.2: </span><span class="name">Directory Structure of a Build Root (<code class="filename">/var/tmp/build-root/</code>) </span><a title="Permalink" class="permalink" href="cha.obs.basicworkflow.html#exa.workflow.buildroot">#</a></h6></div><div class="example-contents">
    
    <div class="verbatim-wrap"><pre class="screen">/home/abuild/
└── rpmbuild
    ├── BUILD <span id="co.workflow.buildroot.build"></span><span class="callout">1</span>
    ├── BUILDROOT  <span id="co.workflow.buildroot.buildroot"></span><span class="callout">2</span>
    ├── OTHER  <span id="co.workflow.buildroot.other"></span><span class="callout">3</span>
    ├── RPMS  <span id="co.workflow.buildroot.rpms"></span><span class="callout">4</span>
    │   ├── i386
    │   ├── noarch
    │   └── x86_64
    ├── SOURCES  <span id="co.workflow.buildroot.sources"></span><span class="callout">5</span>
    ├── SPECS  <span id="co.workflow.buildroot.specs"></span><span class="callout">6</span>
    └── SRPMS  <span id="co.workflow.buildroot.srpms"></span><span class="callout">7</span></pre></div>
    
    <div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.workflow.buildroot.build"><span class="callout">1</span></a> </p></td><td valign="top" align="left">
      <p>
       Contains directory named after the package name.
       In spec files, the name of the package directory is referenced
       using the <code class="systemitem">%buildroot</code> macro.
      </p>
     </td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.workflow.buildroot.buildroot"><span class="callout">2</span></a> </p></td><td valign="top" align="left">
      <p>
       If the build process was unable to create a package, this directory
       contains all files and directories which are installed in the target
       system through the <code class="systemitem">%install</code>
       section of the spec file.
      </p>
      <p>
       If the package has been successfully built, this directory will be
       emptied.
      </p>
     </td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.workflow.buildroot.other"><span class="callout">3</span></a> </p></td><td valign="top" align="left">
      <p>
       Usually contains the file <code class="filename">rpmlint.log</code>.
      </p>
     </td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.workflow.buildroot.rpms"><span class="callout">4</span></a> </p></td><td valign="top" align="left">
      <p>
       If the build was successful, stores binary RPMs into subdirectories of
       architecture
       (for example, <code class="filename">noarch</code> or
       <code class="filename">x86_64</code>).
      </p>
     </td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.workflow.buildroot.sources"><span class="callout">5</span></a> </p></td><td valign="top" align="left">
      <p>
       All source files from the working copy will be copied here.
      </p>
     </td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.workflow.buildroot.specs"><span class="callout">6</span></a> </p></td><td valign="top" align="left">
      <p>
      
      </p>
     </td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.workflow.buildroot.srpms"><span class="callout">7</span></a> </p></td><td valign="top" align="left">
      <p>
       Stores source RPMs into this directory.
      </p>
     </td></tr></table></div>
   </div></div>
  </div>
 </div>

 <div class="sect1 " id="sec.obs.basicworkflow.add-dependencies"><div class="titlepage"><div><div><h2 class="title" id="sec.obs.basicworkflow.add-dependencies"><span class="number">4.4 </span><span class="name">Adding Dependencies to Your Project</span> <a title="Permalink" class="permalink" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.add-dependencies">#</a></h2></div></div></div>
  
  <p>
   Software usually depends on other software: To run an application, you
   may, for example, need additional libraries. Such dependencies are called
   <span class="emphasis"><em>installation requirements</em></span>.
  </p>
  
  <p>
   Additionally, there are also dependencies that are only necessary for
   building a package but not when the software it contains is run. Such
   dependencies are called <span class="emphasis"><em>build requirements</em></span>.
  </p>
  <p>
   The Open Build Service provides the following methods to handle both dependencies in
   your projects:
  </p>
  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
    <p>
     <a class="xref" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.deps" title="4.4.1. Adding Dependencies to Your Build Recipes">Section 4.4.1, “Adding Dependencies to Your Build Recipes”</a>
    </p>
   </li><li class="listitem ">
    <p>
     <a class="xref" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.layering" title="4.4.2. Associating Other Repositories with Your Repository">Section 4.4.2, “Associating Other Repositories with Your Repository”</a>
     (<span class="emphasis"><em>layering</em></span>)
    </p>
   </li><li class="listitem ">
    <p>
     <a class="xref" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.reuse" title="4.4.3. Reusing Packages in Your Project">Section 4.4.3, “Reusing Packages in Your Project”</a>
     (<span class="emphasis"><em>linking</em></span> and <span class="emphasis"><em>aggregating</em></span>)
    </p>
   </li></ul></div>

  <div class="sect2 " id="sec.obs.basicworkflow.deps"><div class="titlepage"><div><div><h3 class="title" id="sec.obs.basicworkflow.deps"><span class="number">4.4.1 </span><span class="name">Adding Dependencies to Your Build Recipes</span> <a title="Permalink" class="permalink" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.deps">#</a></h3></div></div></div>
   
   
   
   <p>
    In a spec file, dependencies are expressed with the keywords <code class="literal">Requires</code>
    (installation requirements) and <code class="literal">BuildRequires</code> (installation
    requirements). Both belong to the header of the spec file.
   </p>
   <div class="example" id="ex.obs.basicworkflow.excerpt"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 4.3: </span><span class="name">Excerpt of Build and Installation Requirements </span><a title="Permalink" class="permalink" href="cha.obs.basicworkflow.html#ex.obs.basicworkflow.excerpt">#</a></h6></div><div class="example-contents">
    
    <div class="verbatim-wrap"><pre class="screen">Name:             foo-example
Version:          1.0.0
BuildRequires:    bar
Requires:         zool &gt;= 1.5.6</pre></div>
   </div></div>
   
  </div>
  <div class="sect2 " id="sec.obs.basicworkflow.layering"><div class="titlepage"><div><div><h3 class="title" id="sec.obs.basicworkflow.layering"><span class="number">4.4.2 </span><span class="name">Associating Other Repositories with Your Repository</span> <a title="Permalink" class="permalink" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.layering">#</a></h3></div></div></div>
   
   <p>
    There is no need to duplicate the work of others. If you need a specific
    package which is available in another repository, you can reference this
    repository in your project metadata. This is called <span class="emphasis"><em>layering</em></span>.
   </p>
   <p>
    When a package is needed, it can be installed from another
    other repository (see the note below).
   </p>
   <p>
    To add another repository that can be used as build or installation
    requirements, do the following:
   </p>
   <div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step ">
     <p>
      Open a terminal.
     </p>
    </li><li class="step ">
     <p>
      Edit the project metadata:
     </p>
     <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> meta prj --edit home:obsgeeko</pre></div>
    </li><li class="step " id="st.obs.basicworkflow.layering.repository">
     <p>
      Search for <code class="sgmltag-element">repository</code> elements. For example, to allow usage
      packages from <code class="uri">devel:languages:python</code> in a
      openSUSE Tumbleweed project, extend the <code class="sgmltag-element">repository</code> element with:
     </p>
     <div class="verbatim-wrap highlight xml"><pre class="screen">&lt;repository name="openSUSE_Tumbleweed"&gt;
    <span class="strong"><strong>&lt;path project="devel:languages:python" repository="openSUSE_Factory"/&gt;</strong></span>
    &lt;path project="openSUSE:Factory" repository="standard"/&gt;
    &lt;arch&gt;x86_64&lt;/arch&gt;
&lt;/repository&gt;</pre></div>
     <div id="idm139937490539488" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Order Is Important</h6>
      
      <p>
       The order of the <code class="sgmltag-element">path</code> elements is important:
       <code class="sgmltag-element">path</code> elements are searched
       from top to bottom.
      </p>
      <p>
       If a package cannot be found in the first
       repository, the second repository is considered.
       When the first suitable package is found, it is installed and the
       build preparation can continue.
      </p>
      <p>
       For practical reasons, additional repositories should be added
       before the standard repositories of the specified
       distribution.
      </p>
     </div> 
    </li><li class="step " id="st.obs.basicworkflow.layering.path">
     <p>
      Add more <code class="sgmltag-element">path</code> elements under the same
      <code class="sgmltag-element">repository</code> element.
     </p>
    </li><li class="step ">
     <p>
      If necessary, repeat <a class="xref" href="cha.obs.basicworkflow.html#st.obs.basicworkflow.layering.repository" title="Step 3">Step 3</a> and
      <a class="xref" href="cha.obs.basicworkflow.html#st.obs.basicworkflow.layering.path" title="Step 4">Step 4</a> to add <code class="sgmltag-element">path</code>
      elements to <code class="sgmltag-element">repository</code> elements of other distributions or releases.
     </p>
    </li></ol></div></div>
  </div>
  <div class="sect2 " id="sec.obs.basicworkflow.reuse"><div class="titlepage"><div><div><h3 class="title" id="sec.obs.basicworkflow.reuse"><span class="number">4.4.3 </span><span class="name">Reusing Packages in Your Project</span> <a title="Permalink" class="permalink" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.reuse">#</a></h3></div></div></div>
   
   
   <p>
    To reuse existing packages in your package repository, OBS offers
    two methods: <span class="quote">“<span class="quote">aggregating</span>”</span> and <span class="quote">“<span class="quote">linking</span>”</span>.
   </p>

   

   
   <div class="sect3 " id="sec.obs.basicworkflow.reuse.linking"><div class="titlepage"><div><div><h4 class="title" id="sec.obs.basicworkflow.reuse.linking"><span class="number">4.4.3.1 </span><span class="name">Linking a Package</span> <a title="Permalink" class="permalink" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.reuse.linking">#</a></h4></div></div></div>
    
    <p>
     A linked package is a clone of another package with
     additional modifications. Linking is used in the following situations:
    </p>
    <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
      <p>
       The source code needs changes, but the source either cannot be changed
       in the original package or doing so is impractical or inconvenient to
       change the source.
      </p>
     </li><li class="listitem ">
      <p>
       To separate the original source from own patches.
      </p>
     </li></ul></div>
    <p>
     The general syntax of the <code class="command">linkpac</code> command is:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> linkpac <em class="replaceable ">SOURCEPRJ</em> <em class="replaceable ">SOURCEPAC</em> <em class="replaceable ">DESTPRJ</em></pre></div>
    <p>
     For example, to link the package <span class="package">python-lxml</span> from
     <code class="uri">devel:language:python</code> into your home project, use the
     following command:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> linkpac devel:language:python python-lxml home:obsgeeko</pre></div>
    <p>
     In contrast to aggregating, the checkout contains all the
     files from the linked repository. To reduce it to a single file (like
     with aggregating), <span class="quote">“<span class="quote">unexpand</span>”</span> it in the working
     directory like this:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> up --unexpand-link
Unexpanding to rev 1
A    _link
D    pytest-3.2.1.tar.gz
D    python-pytest-doc.changes
D    python-pytest-doc.spec
D    python-pytest.changes
D    python-pytest.spec
At revision 1.</pre></div>
    <p>
     This gives you a <code class="filename">_link</code> file similar to the
     <code class="filename">_aggregate</code> file. You can use the <code class="option">--expand-link</code>
     option in the <code class="command">up</code> subcommand to revert to the previous
     state.
    </p>
   </div>
  </div>
 </div>

</div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha.obs.building.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 5 </span>Building Package Formats</span></a><a class="nav-link" href="par.working.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Part III </span>Usage</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>