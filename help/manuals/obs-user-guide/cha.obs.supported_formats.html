<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Supported Formats | User Guide</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" />
<meta name="title" content="Supported Formats" />
<meta name="description" content="Open Build Service is by design format agnostic, but it needs format specific support to be able to parse build descriptions and running the build. This chapte…" />
<meta name="book-title" content="User Guide" />
<meta name="chapter-title" content="Chapter 26. Supported Formats" />
<meta property="og:title" content="Supported Formats" />
<meta property="og:description" content="Open Build Service is by design format agnostic, but it needs format specific support to be able to parse build descriptions and running the build. This chapte…" />
<meta property="og:type" content="article" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Supported Formats" />
<meta name="twitter:description" content="Open Build Service is by design format agnostic, but it needs format specific support to be able to parse build descriptions and running the build. This chapte…" />
<link rel="home" href="index.html" title="OBS Documentation" /><link rel="up" href="par.reference.html" title="Part VI. Reference" /><link rel="prev" href="cha.obs.scm_bridge.html" title="Chapter 25. SCM Bridge [EXPERIMENTAL]" /><link rel="next" href="cha.obs.request_and_review_system.html" title="Chapter 27. Request And Review System" />
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" /></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="offline js-off"><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.svg" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="User Guide"><span class="book-icon">User Guide</span></a><span> › </span><a class="crumb" href="par.reference.html">Reference</a><span> › </span><a class="crumb" href="cha.obs.supported_formats.html">Supported Formats</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>User Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="bk02pr01.html"><span class="number"> </span><span class="name">About this Guide</span></a></li><li class="inactive"><a href="par.first_steps.html"><span class="number">I </span><span class="name">First Steps</span></a><ol><li class="inactive"><a href="art.obs.bg.html"><span class="number">1 </span><span class="name">Beginnerʼs Guide</span></a></li></ol></li><li class="inactive"><a href="par.concepts.html"><span class="number">II </span><span class="name">Concepts</span></a><ol><li class="inactive"><a href="cha.obs.package_formats.html"><span class="number">2 </span><span class="name">Supported Build Recipes and Package Formats</span></a></li></ol></li><li class="inactive"><a href="bk02pt03.html"><span class="number">III </span><span class="name">Setup</span></a><ol><li class="inactive"><a href="cha.obs.osc.html"><span class="number">3 </span><span class="name">osc, the Command Line Tool</span></a></li><li class="inactive"><a href="cha.obs.prjconfig.html"><span class="number">4 </span><span class="name">Project Configuration</span></a></li></ol></li><li class="inactive"><a href="par.working.html"><span class="number">IV </span><span class="name">Usage</span></a><ol><li class="inactive"><a href="cha.obs.basicworkflow.html"><span class="number">5 </span><span class="name">Basic OBS Workflow</span></a></li><li class="inactive"><a href="cha.obs.building.html"><span class="number">6 </span><span class="name">Local Building</span></a></li><li class="inactive"><a href="cha.obs.source_service.html"><span class="number">7 </span><span class="name">Using Source Services</span></a></li><li class="inactive"><a href="cha.obs.scm_ci_workflow_integration.html"><span class="number">8 </span><span class="name">SCM/CI Workflow Integration</span></a></li><li class="inactive"><a href="cha.obs.stagingworkflow.html"><span class="number">9 </span><span class="name">Staging Workflow</span></a></li><li class="inactive"><a href="cha.obs.notifications.html"><span class="number">10 </span><span class="name">Notifications</span></a></li></ol></li><li class="inactive"><a href="par.best_practices.html"><span class="number">V </span><span class="name">Best Practices</span></a><ol><li class="inactive"><a href="cha.obs.best-practices.webuiusage.html"><span class="number">11 </span><span class="name">Using the OBS Web UI</span></a></li><li class="inactive"><a href="cha.obs.best-practices.basics.html"><span class="number">12 </span><span class="name">Basic Concepts and Work Styles</span></a></li><li class="inactive"><a href="cha.obs.best-practices.scm_integration.html"><span class="number">13 </span><span class="name">How to integrate external SCM sources</span></a></li><li class="inactive"><a href="cha.obs.best-practices.upstream.html"><span class="number">14 </span><span class="name">Publishing Upstream Binaries</span></a></li><li class="inactive"><a href="cha.obs.best-practices.bootstrapping.html"><span class="number">15 </span><span class="name">Bootstrapping</span></a></li><li class="inactive"><a href="cha.obs.best-practices.oscexamples.html"><span class="number">16 </span><span class="name"><code class="command">osc</code> Example Commands</span></a></li><li class="inactive"><a href="cha.obs.best-practices.advanced.html"><span class="number">17 </span><span class="name">Advanced Project Setups</span></a></li><li class="inactive"><a href="cha.obs.best-practices.kmp.html"><span class="number">18 </span><span class="name">Building Kernel Modules</span></a></li><li class="inactive"><a href="cha.obs.best-practices.howto.html"><span class="number">19 </span><span class="name">Common Questions and Solutions</span></a></li></ol></li><li class="inactive"><a href="par.reference.html"><span class="number">VI </span><span class="name">Reference</span></a><ol><li class="inactive"><a href="cha.obs.architecture.html"><span class="number">20 </span><span class="name">OBS Architecture</span></a></li><li class="inactive"><a href="cha.obs.concepts.html"><span class="number">21 </span><span class="name">OBS Concepts</span></a></li><li class="inactive"><a href="cha.obs.build_process.html"><span class="number">22 </span><span class="name">Build Process</span></a></li><li class="inactive"><a href="cha.obs.build_containers.html"><span class="number">23 </span><span class="name">Build Containers</span></a></li><li class="inactive"><a href="cha.obs.source_management.html"><span class="number">24 </span><span class="name">Source Management</span></a></li><li class="inactive"><a href="cha.obs.scm_bridge.html"><span class="number">25 </span><span class="name">SCM Bridge [EXPERIMENTAL]</span></a></li><li class="inactive"><a href="cha.obs.supported_formats.html"><span class="number">26 </span><span class="name">Supported Formats</span></a></li><li class="inactive"><a href="cha.obs.request_and_review_system.html"><span class="number">27 </span><span class="name">Request And Review System</span></a></li><li class="inactive"><a href="cha.obs.image_templates.html"><span class="number">28 </span><span class="name">Image Templates</span></a></li><li class="inactive"><a href="cha.obs.multibuild.html"><span class="number">29 </span><span class="name">Multiple Build Description File Handling</span></a></li><li class="inactive"><a href="cha.obs.maintenance_setup.html"><span class="number">30 </span><span class="name">Maintenance Support</span></a></li><li class="inactive"><a href="cha.obs.binary_tracking.html"><span class="number">31 </span><span class="name">Binary Package Tracking</span></a></li><li class="inactive"><a href="cha.obs.admin.html"><span class="number">32 </span><span class="name">Administration</span></a></li><li class="inactive"><a href="cha.obs.build_scheduling_and_dispatching.html"><span class="number">33 </span><span class="name">Scheduling and Dispatching</span></a></li><li class="inactive"><a href="cha.obs.build_job_constraints.html"><span class="number">34 </span><span class="name">Build Job Constraints</span></a></li><li class="inactive"><a href="cha.obs.build_preinstall.html"><span class="number">35 </span><span class="name">Building Preinstall Images</span></a></li><li class="inactive"><a href="cha.obs.authorization.token.html"><span class="number">36 </span><span class="name">Authorization</span></a></li><li class="inactive"><a href="cha.obs.qa_hooks.html"><span class="number">37 </span><span class="name">Quality Assurance(QA) Hooks</span></a></li><li class="inactive"><a href="cha.obs.factory.html"><span class="number">38 </span><span class="name">openSUSE Factory</span></a></li></ol></li><li class="inactive"><a href="obs.glossary.html"><span class="number"> </span><span class="name">Glossary</span></a></li><li class="inactive"><a href="bk02apa.html"><span class="number">A </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 25. SCM Bridge [EXPERIMENTAL]" href="cha.obs.scm_bridge.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 27. Request And Review System" href="cha.obs.request_and_review_system.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="User Guide"><span class="book-icon">User Guide</span></a><span> › </span><a class="crumb" href="par.reference.html">Reference</a><span> › </span><a class="crumb" href="cha.obs.supported_formats.html">Supported Formats</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 25. SCM Bridge [EXPERIMENTAL]" href="cha.obs.scm_bridge.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 27. Request And Review System" href="cha.obs.request_and_review_system.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class=""><div class="documentation"><div class="chapter " id="cha.obs.supported_formats"><div class="titlepage"><div><div><h2 class="title"><span class="number">26 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Supported Formats</span> <a title="Permalink" class="permalink" href="cha.obs.supported_formats.html#">#</a></h2></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha.obs.supported_formats.html#sec.obs.building.spec2rpm"><span class="number">26.1 </span><span class="name">Spec File Specials (RPM)</span></a></span></dt><dt><span class="sect1"><a href="cha.obs.supported_formats.html#id-1.5.10.8.4"><span class="number">26.2 </span><span class="name">OBS Extensions for (KIWI) Appliance Builds</span></a></span></dt><dt><span class="sect1"><a href="cha.obs.supported_formats.html#id-1.5.10.8.5"><span class="number">26.3 </span><span class="name">OBS Extensions for Dockerfile based builds</span></a></span></dt></dl></div></div><p>
  Open Build Service is by design format agnostic, but it needs format specific
  support to be able to parse build descriptions and running the build.
  This chapter is focusing on describing Open Build Service specifics of a format.
  Either limitations or extensions of Open Build Service builds.
 </p><div class="sect1 " id="sec.obs.building.spec2rpm"><div class="titlepage"><div><div><h2 class="title"><span class="number">26.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Spec File Specials (RPM)</span> <a title="Permalink" class="permalink" href="cha.obs.supported_formats.html#sec.obs.building.spec2rpm">#</a></h2></div></div></div><p>
     To create an RPM package, you need a spec file.
  </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>
     A file with the extension <code class="filename">.changes</code>
     can be used to document the package history, but it is not required.
    </p></li><li class="listitem "><p>
     OBS-specific RPM macros which are set are: <code class="literal">%_project</code> and <code class="literal">%_repository</code>
    </p></li><li class="listitem "><p>
     <code class="code">#!ForceMultiVersion</code> can be used to avoid resetting the
     build counter reset on version update. This is handled automatically in
     most cases. Explicitly adding this instruction is only needed when it is
     not possible to detect whether there are subpackages defining their own
     version. This can be the case when the subpackages are created
     dynamically via external rpm macros.
    </p></li><li class="listitem "><p>
      <code class="code">#!BcntSyncTag: STRING</code> defines the build counter sync tag in a spec file.
      It is used when the bcntsynctag element tag is not defined in package meta. Also it can
      depend on architecture, repository or flavor for example.
    </p></li><li class="listitem "><p>
        <code class="code">#!BuildConflicts: STRING</code> defines a conflicting package or dependency at build time only.
    </p></li><li class="listitem "><p>
     <code class="code">#!BuildIgnore: STRING</code> ignores a dependency at build time.
    </p></li><li class="listitem "><p>
     <code class="code">#!BuildRequires: STRING</code> Requires a build dependency. Usually the rpm native BuildRequires
     is the better way to define this. Use this tag only when the dependency should only exist when using
     the build script or OBS.
    </p></li><li class="listitem "><p>
	    <code class="code">#!needsrootforbuild</code> The build will be executed by root user. Please note that this must
    be permitted either by the OBS admin (via the BSConfig.pm configuration) or enabled in via build configuration rule. Also osc requires an additional parameter for local build (--userootforbuild).</p></li><li class="listitem "><p>
	    <code class="code">#!needsslcertforbuild</code> This will prepare an SSL certification based on the project key. It is
	    used to create secure boot enabled packages usually. Please note that this will fail, if the project
	    still has an old DSA key.
</p></li><li class="listitem "><p>
	    <code class="code">#!needsappxsslcertforbuild</code> Creates an appx compatible ssl certificate based on the project key.
            Please note that this will fail, if the project still has an old DSA key.
</p></li><li class="listitem "><p>
	    <code class="code">#!needsbinariesforbuild</code> All package files are usually removed before starting the build (after finishing to setup the build environment). This marker keeps them also during build.</p></li></ul></div></div><div class="sect1 " id="id-1.5.10.8.4"><div class="titlepage"><div><div><h2 class="title"><span class="number">26.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">OBS Extensions for (KIWI) Appliance Builds</span> <a title="Permalink" class="permalink" href="cha.obs.supported_formats.html#id-1.5.10.8.4">#</a></h2></div></div></div><p>
	KIWI appliance builds create images which can be used for direct consumption. Note: builds in non-VM
	environments do fail often due to the bootloader setup. Use <code class="command">osc build --vm-type=kvm</code> for local building.
	OBS is evaluating kiwi builds at least two times. One time for the build host dependencies and another
	time for the target distribution used inside of the image. For container builds a third evaluation
	happens to find the base container.
   </p><p>
     KIWI builds inside of OBS need to fulfill following requirements:
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p><code class="filename">config.xml</code> files need to be renamed to a filename with <code class="filename">.kiwi</code> suffix. </p></li><li class="listitem "><p>repositories which are used must use either a URL which starts with the OBS download prefix or they must
  	   be written in <code class="uri">obs://PROJECT/REPOSITORY</code> syntax. </p></li></ul></div><p>
     OBS extends kiwi functionality with following options. These covers cases which would need explicit 
     command line commands, so they are covered via the tags to have them in a reproducible way.
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>A repository defined as <code class="uri">obsrepositories:/</code> will used the expanded list of repositories as defined in the project meta.
           This is useful when moving kiwi image descriptions between projects, for example for development and release builds. </p></li><li class="listitem "><p>Defining build counter sync tag <code class="command">OBS-BcntSyncTag: STRING</code> 
     </p></li><li class="listitem "><p>An exclusive architecture list to build for can be defined with an xml comment <code class="command">OBS-ExclusiveArch: ARCH_LIST</code> 
     </p></li><li class="listitem "><p>An excluded architecture list to skip builds can be defined with an xml comment <code class="command">OBS-ExcludeArch: ARCH_LIST</code> 
     </p></li><li class="listitem "><p>A list of profiles to build can be defined via an xml comment <code class="command">OBS-Profiles: PROFILE_LIST</code> 
     </p><p>This can also be handled via _multibuild flavor lists by setting a fixed string of <code class="command">OBS-Profiles: @BUILD_FLAVOR@</code> 
     </p></li><li class="listitem "><p>Packages get picked usually in a fixed order from the most important repository in OBS. This happens independently
      of the version number of the packages. Set the xml comment <code class="command">OBS-UnorderedRepos</code> to disable the repository order handling and to have a more similar behavior as with plain package manager builds. Note: this can result into switching
  	 repositories between builds and is therefore less reproducible.
     </p></li><li class="listitem "><p>Container builds can specify a specific repository which shall be used for searching the base container. 
      Use the XML comment <code class="command">OBS-Imagerepo:$REPOSITORY_URL</code> for this. The repository URL may be
  	   in <code class="uri">obs://$PROJECT/$REPOSITORY</code> style.
     </p></li><li class="listitem "><p>Container builds can specify additional tags via <code class="command">OBS-AddTag:$TAG</code> (KIWI limits it to one tag)
  	   in <code class="uri">obs://$PROJECT/$REPOSITORY</code> style.
     </p></li><li class="listitem "><p>A predefined milestone <code class="command">OBS-Milestone: milestone</code> 
     </p><p>
      This defines a milestone name (for example, <code class="literal">Beta1</code>)
      which will be applied during release operations. The candidate will
      receive its final tag then.
     </p></li></ul></div></div><div class="sect1 " id="id-1.5.10.8.5"><div class="titlepage"><div><div><h2 class="title"><span class="number">26.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">OBS Extensions for Dockerfile based builds</span> <a title="Permalink" class="permalink" href="cha.obs.supported_formats.html#id-1.5.10.8.5">#</a></h2></div></div></div><p>
	OBS needs to parse RUN commands to detect build dependencies (repositories and packages).
       Currently calls from zypper, apt-get, yum and dnf are supported.
       Additional downloads need to be covered by source services. This ensures reproducible
       builds and a safe build environment without network access.
   </p><p>
     OBS extends Docker functionality with the below tags.
     Instead of these options, you would otherwise need explicit command-line commands.
     However, to make it possible to create reproducible builds, use the OBS tags.
   </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>A <code class="command">#!UseOBSRepositories</code> tag will use the expanded list of repositories as defined via path elements in the project meta.
           This is useful when moving descriptions between projects, for example for development and release builds. </p></li><li class="listitem "><p>
     The tag <code class="command">#!UnorderedRepos</code> will disable the
     repository prioritization for build dependencies.
     This behavior is similar to plain Docker tooling.
     It introduces the risk that with each build another repository is
     prioritized or that dependency problems of newer package versions
     are hidden.
 </p></li><li class="listitem "><p><code class="command">#!BcntSyncTag: TAG</code> to define the build counter sync tag.
     </p></li><li class="listitem "><p><code class="command">#!BuildTag: TAG</code> to define one or multiple tags to be used for the container.
     </p></li><li class="listitem "><p><code class="command">#!BuildName: NAME</code> Report back a defined NAME. Otherwise it gets derived from the first tag, replacing all / and : with - characters.
     </p></li><li class="listitem "><p><code class="command">#!BuildVersion: VERSION</code> Report back a defined VERSION. By default it is set to zero. The version is used by OBS for tracking.
     </p></li><li class="listitem "><p><code class="command">#!ExclusiveArch: ARCH_LIST</code> An exclusive architecture list to build for. The architecture list is separated by spaces.
     </p></li><li class="listitem "><p><code class="command">#!ExcludeArch: ARCH_LIST</code> An excluded architecture list to skip builds. The architecture list is separated by spaces.
     </p></li><li class="listitem "><p><code class="command">#!ArchExclusiveLine: ARCH_LIST</code> The next line will only be considered by the scheduler the listed architectures. The line will still get executed on all architectures during the build.
     </p></li><li class="listitem "><p><code class="command">#!ArchExcludedLine: ARCH_LIST</code> The next line will not be considered by the scheduler on the listed architectures. The line will still get executed on all architectures during the build.
     </p></li><li class="listitem "><p>
      <code class="command">#!Milestone: MILESTONE</code>
      This defines a milestone name (for example, <code class="literal">Beta1</code>)
      which will be applied during release operations. The candidate will
      receive its final tag then.
     </p></li><li class="listitem "><p>
      <code class="command">#!NoSquash</code> disables the squashing of all layers created
      during the build to a single layer. Without this, every RUN line is an additional layer.
     </p></li></ul></div></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha.obs.request_and_review_system.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 27 </span>Request And Review System</span></a><a class="nav-link" href="cha.obs.scm_bridge.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 25 </span>SCM Bridge [EXPERIMENTAL]</span></a></div><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2023 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>