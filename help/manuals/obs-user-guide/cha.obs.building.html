<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Local Building | User Guide</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 3.2.0 (https://opensuse.github.io/daps) using SUSE XSL Stylesheets 2.81.0 (based on DocBook XSL Stylesheets snapshot) - chunked" /><meta name="book-title" content="User Guide" /><meta name="chapter-title" content="Chapter 6. Local Building" /><meta name="description" content="Every build which happens on the server can also be executed locally in the same environment using the osc tool. All what you need is to checkout the source code and build the build recipe. The following explains it for RPM format, but it works for any. osc will download needed binaries and execute the local build." /><link rel="home" href="index.html" title="OBS Documentation" /><link rel="up" href="par.working.html" title="Part IV. Usage" /><link rel="prev" href="cha.obs.basicworkflow.html" title="Chapter 5. Basic OBS Workflow" /><link rel="next" href="cha.obs.source_service.html" title="Chapter 7. Using Source Services" />
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://static.opensuse.org/fonts/fonts.css"></link>');
}
else {
  document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="https://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="offline js-off"><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="User Guide"><span class="book-icon">User Guide</span></a><span> › </span><a class="crumb" href="par.working.html">Usage</a><span> › </span><a class="crumb" href="cha.obs.building.html">Local Building</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>User Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="bk02pr01.html"><span class="number"> </span><span class="name">About this Guide</span></a></li><li class="inactive"><a href="par.first_steps.html"><span class="number">I </span><span class="name">First Steps</span></a><ol><li class="inactive"><a href="art.obs.bg.html"><span class="number">1 </span><span class="name">Beginnerʼs Guide</span></a></li></ol></li><li class="inactive"><a href="par.concepts.html"><span class="number">II </span><span class="name">Concepts</span></a><ol><li class="inactive"><a href="cha.obs.package_formats.html"><span class="number">2 </span><span class="name">Supported Build Recipes and Package Formats</span></a></li></ol></li><li class="inactive"><a href="bk02pt03.html"><span class="number">III </span><span class="name">Setup</span></a><ol><li class="inactive"><a href="cha.obs.osc.html"><span class="number">3 </span><span class="name">osc, the Command Line Tool</span></a></li><li class="inactive"><a href="cha.obs.prjconfig.html"><span class="number">4 </span><span class="name">Project Configuration</span></a></li></ol></li><li class="inactive"><a href="par.working.html"><span class="number">IV </span><span class="name">Usage</span></a><ol><li class="inactive"><a href="cha.obs.basicworkflow.html"><span class="number">5 </span><span class="name">Basic OBS Workflow</span></a></li><li class="inactive"><a href="cha.obs.building.html"><span class="number">6 </span><span class="name">Local Building</span></a></li><li class="inactive"><a href="cha.obs.source_service.html"><span class="number">7 </span><span class="name">Using Source Services</span></a></li><li class="inactive"><a href="cha.obs.stagingworkflow.html"><span class="number">8 </span><span class="name">Staging Workflow</span></a></li></ol></li><li class="inactive"><a href="par.best_practices.html"><span class="number">V </span><span class="name">Best Practices</span></a><ol><li class="inactive"><a href="cha.obs.best-practices.webuiusage.html"><span class="number">9 </span><span class="name">Using the OBS Web UI</span></a></li><li class="inactive"><a href="cha.obs.best-practices.basics.html"><span class="number">10 </span><span class="name">Basic Concepts and Work Styles</span></a></li><li class="inactive"><a href="cha.obs.best-practices.scm_integration.html"><span class="number">11 </span><span class="name">How to integrate external SCM sources</span></a></li><li class="inactive"><a href="cha.obs.best-practices.upstream.html"><span class="number">12 </span><span class="name">Publishing Upstream Binaries</span></a></li><li class="inactive"><a href="cha.obs.best-practices.bootstrapping.html"><span class="number">13 </span><span class="name">Bootstrapping</span></a></li><li class="inactive"><a href="cha.obs.best-practices.oscexamples.html"><span class="number">14 </span><span class="name"><code class="command">osc</code> Example Commands</span></a></li><li class="inactive"><a href="cha.obs.best-practices.advanced.html"><span class="number">15 </span><span class="name">Advanced Project Setups</span></a></li><li class="inactive"><a href="cha.obs.best-practices.kmp.html"><span class="number">16 </span><span class="name">Building Kernel Modules</span></a></li><li class="inactive"><a href="cha.obs.best-practices.howto.html"><span class="number">17 </span><span class="name">Common Questions and Solutions</span></a></li></ol></li><li class="inactive"><a href="par.reference.html"><span class="number">VI </span><span class="name">Reference</span></a><ol><li class="inactive"><a href="cha.obs.architecture.html"><span class="number">18 </span><span class="name">OBS Architecture</span></a></li><li class="inactive"><a href="cha.obs.concepts.html"><span class="number">19 </span><span class="name">OBS Concepts</span></a></li><li class="inactive"><a href="cha.obs.build_process.html"><span class="number">20 </span><span class="name">Build Process</span></a></li><li class="inactive"><a href="cha.obs.build_containers.html"><span class="number">21 </span><span class="name">Build Containers</span></a></li><li class="inactive"><a href="cha.obs.source_management.html"><span class="number">22 </span><span class="name">Source Management</span></a></li><li class="inactive"><a href="cha.obs.supported_formats.html"><span class="number">23 </span><span class="name">Supported Formats</span></a></li><li class="inactive"><a href="cha.obs.request_and_review_system.html"><span class="number">24 </span><span class="name">Request And Review System</span></a></li><li class="inactive"><a href="cha.obs.image_templates.html"><span class="number">25 </span><span class="name">Image Templates</span></a></li><li class="inactive"><a href="cha.obs.multibuild.html"><span class="number">26 </span><span class="name">Multiple Build Description File Handling</span></a></li><li class="inactive"><a href="cha.obs.maintenance_setup.html"><span class="number">27 </span><span class="name">Maintenance Support</span></a></li><li class="inactive"><a href="cha.obs.binary_tracking.html"><span class="number">28 </span><span class="name">Binary Package Tracking</span></a></li><li class="inactive"><a href="cha.obs.admin.html"><span class="number">29 </span><span class="name">Administration</span></a></li><li class="inactive"><a href="cha.obs.build_scheduling_and_dispatching.html"><span class="number">30 </span><span class="name">Scheduling and Dispatching</span></a></li><li class="inactive"><a href="cha.obs.build_job_constraints.html"><span class="number">31 </span><span class="name">Build Job Constraints</span></a></li><li class="inactive"><a href="cha.obs.build_preinstall.html"><span class="number">32 </span><span class="name">Building Preinstall Images</span></a></li><li class="inactive"><a href="cha.obs.authorization.token.html"><span class="number">33 </span><span class="name">Authorization</span></a></li><li class="inactive"><a href="cha.obs.qa_hooks.html"><span class="number">34 </span><span class="name">Quality Assurance(QA) Hooks</span></a></li><li class="inactive"><a href="cha.obs.factory.html"><span class="number">35 </span><span class="name">openSUSE Factory</span></a></li></ol></li><li class="inactive"><a href="obs.glossary.html"><span class="number"> </span><span class="name">Glossary</span></a></li><li class="inactive"><a href="bk02apa.html"><span class="number">A </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 5. Basic OBS Workflow" href="cha.obs.basicworkflow.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 7. Using Source Services" href="cha.obs.source_service.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="User Guide"><span class="book-icon">User Guide</span></a><span> › </span><a class="crumb" href="par.working.html">Usage</a><span> › </span><a class="crumb" href="cha.obs.building.html">Local Building</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 5. Basic OBS Workflow" href="cha.obs.basicworkflow.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 7. Using Source Services" href="cha.obs.source_service.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class=""><div class="documentation"><div class="chapter " id="cha.obs.building"><div class="titlepage"><div><div><h2 class="title"><span class="number">6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Local Building</span> <a title="Permalink" class="permalink" href="cha.obs.building.html#">#</a></h2></div><div><div class="abstract">
   <p>
      Every build which happens on the server can also be executed locally in the same environment using
      the osc tool. All what you need is to checkout the source code and build the build recipe. The 
      following explains it for RPM format, but it works for any. osc will download needed binaries
      and execute the local build.
   </p>
  </div></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha.obs.building.html#sec.obs.building.generic"><span class="number">6.1 </span><span class="name">Generic build options</span></a></span></dt><dt><span class="sect1"><a href="cha.obs.building.html#sec.obs.building.advanced"><span class="number">6.2 </span><span class="name">Advanced Build Environment Handling</span></a></span></dt></dl></div></div>
 
 
 
 
 <div class="sect1 " id="sec.obs.building.generic"><div class="titlepage"><div><div><h2 class="title"><span class="number">6.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Generic build options</span> <a title="Permalink" class="permalink" href="cha.obs.building.html#sec.obs.building.generic">#</a></h2></div></div></div>
  
  <p>
     Independent of the build format you need at least one source file as build description.
     The file name and structure is format specific. You can find some supported formats described below.
     To build your build format, you need:
  </p>
  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
     <p>the original source archive. Instead of that the package may contain a _service file which
	   describes how to create it, for example by downloading it or building it from a SCM repository.
	   It can also be used to create the build description file. Find more details about it in the
	   source service chapter.
      </p>
   </li><li class="listitem ">
    <p>
     optional patches which changes the original source code to fix problems
     regarding security, the build process, or other issues
    </p>
   </li><li class="listitem ">
    <p>
     other files which do not fall into one of the previous categories
    </p>
   </li></ul></div>
  <p>
   For existing packages, this is already the case. To build an
   existing package, the general procedure is as follows:</p>
  <div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step ">
    <p>
     If you have not done so yet, set up your project as shown in
     <a class="xref" href="cha.obs.basicworkflow.html#sec.obs.basicworkflow.setuphome" title="5.1. Setting Up Your Home Project">Section 5.1, “Setting Up Your Home Project”</a>.
    </p>
   </li><li class="step ">
    <p>
     In the terminal, choose or create a directory on a local partition that
     has enough space to hold the package sources.
    </p>
   </li><li class="step ">
    <p>
     Check out the project that contains the package:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> checkout <em class="replaceable ">PROJECT</em> <em class="replaceable ">PACKAGE</em></pre></div>
    <p>
     This creates a <code class="filename"><em class="replaceable ">PROJECT</em>/<em class="replaceable ">PACKAGE</em></code>
     directory in the current directory.
    </p>
   </li><li class="step ">
    <p>
     Change into the directory:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">cd</code> <em class="replaceable ">PROJECT</em>/<em class="replaceable ">PACKAGE</em></pre></div>
   </li><li class="step ">
    <p>
     The simplest way to run a build is just to call the build command. osc will try
     to detect your installed OS and build for it if possible.
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> build</pre></div>
    <p>
     However, you may also manually specify the build target. For example openSUSE Tumbleweed for
     x86_64, you want to create the RPM package:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> build openSUSE_Tumbleweed x86_64</pre></div>
   </li><li class="step ">
    <p>
	It will download the required dependencies and execute the build script. Therefore it needs to ask for root 
	permissions in most cases.
    </p>
    <div class="variablelist "><dl class="variablelist"><dt id="id-1.5.8.3.4.5.6.2.1"><span class="term ">Successful Build</span></dt><dd>

       <div class="verbatim-wrap"><pre class="screen">[   15s] RPMLINT report:
[   15s] ===============
[   16s] 2 packages and 0 specfiles checked; 0 errors, 0 warnings.
[   16s]
[   16s]
[   16s] venus finished "build <em class="replaceable ">PACKAGE</em>.spec" at Fri Sep  1 11:54:31 UTC 2017.
[   16s]

/var/tmp/build-root/openSUSE_Tumbleweed-x86_64/home/abuild/rpmbuild/SRPMS/<em class="replaceable ">PACKAGE</em>-<em class="replaceable ">VERSION</em>-0.src.rpm

/var/tmp/build-root/openSUSE_Tumbleweed-x86_64/home/abuild/rpmbuild/RPMS/noarch/<em class="replaceable ">PACKAGE</em>-<em class="replaceable ">VERSION</em>-0.noarch.rpm</pre></div>
      </dd><dt id="id-1.5.8.3.4.5.6.2.2"><span class="term ">Unsuccessful Build</span></dt><dd>

       <div class="verbatim-wrap"><pre class="screen">[    8s] venus failed "build <em class="replaceable ">PACKAGE</em>.spec" at Fri Sep  1 11:58:55 UTC 2017.
[    8s]

The buildroot was: /var/tmp/build-root/openSUSE_Tumbleweed-x86_64</pre></div>
      </dd></dl></div>
    <p>
     A successful build of a spec file ends with the creation of the RPM and SRPM files.
    </p>
   </li><li class="step ">
    <p>
     For a detailed log, see the file
     <code class="filename">/var/tmp/build-root/openSUSE_Tumbleweed-x86_64/.build.log</code>.
    </p>
   </li></ol></div></div>
 </div>

 <div class="sect1 " id="sec.obs.building.advanced"><div class="titlepage"><div><div><h2 class="title"><span class="number">6.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Advanced Build Environment Handling</span> <a title="Permalink" class="permalink" href="cha.obs.building.html#sec.obs.building.advanced">#</a></h2></div></div></div>
  
  <p>
	  The default build environment for local builds is usually chroot. While this is simplest environment
	  and is therefore easy and fast to handle, it has also a number of shortcomings. For one it is
	  not safe against attacks, so you must not build sources or using build dependencies from a resource
	  which you do not trust. Furthermore the environment is not fully isolated and runs not the kernel the
	  target distribution runs. This means esp image builds and kernel/hardware specific builds may fail or
	  won't produce the same result. The server side is usually set to inside of KVM therefore to avoid this.
  </p>
  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
     <p>You can also build locally in KVM (if your hardware supports it) by running
      </p>
      <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> build --vm-type=kvm --vm-memory=<em class="replaceable ">MB</em></pre></div>
   </li><li class="listitem ">
      <p>Another important virtualization mode is qemu. This can be used to build for a foreign hardware
	      architecture even when the distribution is not prepared for the qemu user land emulator. However, this
	      qemu system emulator approach will be much slower. 
      </p>
      <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> build --vm-type=qemu --vm-memory=<em class="replaceable ">MB</em> <em class="replaceable ">REPOSITORY</em> <em class="replaceable ">ARCHITECTURE</em></pre></div>
   </li><li class="listitem ">
     <p>You may want to jump inside of a the build environment for debugging purposes. This can be done via the following command:
           </p>
      <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> shell --vm-type=<em class="replaceable ">VM</em></pre></div>
   </li><li class="listitem ">
     <p>To remove the build environment, use:
           </p>
      <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> wipe --vm-type=<em class="replaceable ">VM</em></pre></div>
   </li></ul></div>
 </div>

</div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha.obs.source_service.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 7 </span>Using Source Services</span></a><a class="nav-link" href="cha.obs.basicworkflow.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 5 </span>Basic OBS Workflow</span></a></div><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2021 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>