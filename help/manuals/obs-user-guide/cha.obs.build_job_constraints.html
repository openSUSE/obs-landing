<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Build Job Constraints | User Guide</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" />
<meta name="title" content="Build Job Constraints" />
<meta name="description" content="Build job constraints can define requirements for the hardware or software of the build host. Constraints can be defined per package or for repositories." />
<meta name="book-title" content="User Guide" />
<meta name="chapter-title" content="Chapter 34. Build Job Constraints" />
<meta property="og:title" content="Build Job Constraints" />
<meta property="og:description" content="Build job constraints can define requirements for the hardware or software of the build host. Constraints can be defined per package or for repositories." />
<meta property="og:type" content="article" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="Build Job Constraints" />
<meta name="twitter:description" content="Build job constraints can define requirements for the hardware or software of the build host. Constraints can be defined per package or for repositories." />
<link rel="home" href="index.html" title="OBS Documentation" /><link rel="up" href="par.reference.html" title="Part VI. Reference" /><link rel="prev" href="cha.obs.build_scheduling_and_dispatching.html" title="Chapter 33. Scheduling and Dispatching" /><link rel="next" href="cha.obs.build_preinstall.html" title="Chapter 35. Building Preinstall Images" />
<script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css" /></noscript><script src="static/js/jquery-1.12.4.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="offline js-off"><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.svg" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="User Guide"><span class="book-icon">User Guide</span></a><span> › </span><a class="crumb" href="par.reference.html">Reference</a><span> › </span><a class="crumb" href="cha.obs.build_job_constraints.html">Build Job Constraints</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>User Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="bk02pr01.html"><span class="number"> </span><span class="name">About this Guide</span></a></li><li class="inactive"><a href="par.first_steps.html"><span class="number">I </span><span class="name">First Steps</span></a><ol><li class="inactive"><a href="art.obs.bg.html"><span class="number">1 </span><span class="name">Beginnerʼs Guide</span></a></li></ol></li><li class="inactive"><a href="par.concepts.html"><span class="number">II </span><span class="name">Concepts</span></a><ol><li class="inactive"><a href="cha.obs.package_formats.html"><span class="number">2 </span><span class="name">Supported Build Recipes and Package Formats</span></a></li></ol></li><li class="inactive"><a href="bk02pt03.html"><span class="number">III </span><span class="name">Setup</span></a><ol><li class="inactive"><a href="cha.obs.osc.html"><span class="number">3 </span><span class="name">osc, the Command Line Tool</span></a></li><li class="inactive"><a href="cha.obs.prjconfig.html"><span class="number">4 </span><span class="name">Project Configuration</span></a></li></ol></li><li class="inactive"><a href="par.working.html"><span class="number">IV </span><span class="name">Usage</span></a><ol><li class="inactive"><a href="cha.obs.basicworkflow.html"><span class="number">5 </span><span class="name">Basic OBS Workflow</span></a></li><li class="inactive"><a href="cha.obs.building.html"><span class="number">6 </span><span class="name">Local Building</span></a></li><li class="inactive"><a href="cha.obs.source_service.html"><span class="number">7 </span><span class="name">Using Source Services</span></a></li><li class="inactive"><a href="cha.obs.scm_ci_workflow_integration.html"><span class="number">8 </span><span class="name">SCM/CI Workflow Integration</span></a></li><li class="inactive"><a href="cha.obs.stagingworkflow.html"><span class="number">9 </span><span class="name">Staging Workflow</span></a></li><li class="inactive"><a href="cha.obs.notifications.html"><span class="number">10 </span><span class="name">Notifications</span></a></li></ol></li><li class="inactive"><a href="par.best_practices.html"><span class="number">V </span><span class="name">Best Practices</span></a><ol><li class="inactive"><a href="cha.obs.best-practices.webuiusage.html"><span class="number">11 </span><span class="name">Using the OBS Web UI</span></a></li><li class="inactive"><a href="cha.obs.best-practices.basics.html"><span class="number">12 </span><span class="name">Basic Concepts and Work Styles</span></a></li><li class="inactive"><a href="cha.obs.best-practices.scm_integration.html"><span class="number">13 </span><span class="name">How to integrate external SCM sources</span></a></li><li class="inactive"><a href="cha.obs.best-practices.upstream.html"><span class="number">14 </span><span class="name">Publishing Upstream Binaries</span></a></li><li class="inactive"><a href="cha.obs.best-practices.bootstrapping.html"><span class="number">15 </span><span class="name">Bootstrapping</span></a></li><li class="inactive"><a href="cha.obs.best-practices.oscexamples.html"><span class="number">16 </span><span class="name"><code class="command">osc</code> Example Commands</span></a></li><li class="inactive"><a href="cha.obs.best-practices.advanced.html"><span class="number">17 </span><span class="name">Advanced Project Setups</span></a></li><li class="inactive"><a href="cha.obs.best-practices.kmp.html"><span class="number">18 </span><span class="name">Building Kernel Modules</span></a></li><li class="inactive"><a href="cha.obs.best-practices.howto.html"><span class="number">19 </span><span class="name">Common Questions and Solutions</span></a></li></ol></li><li class="inactive"><a href="par.reference.html"><span class="number">VI </span><span class="name">Reference</span></a><ol><li class="inactive"><a href="cha.obs.architecture.html"><span class="number">20 </span><span class="name">OBS Architecture</span></a></li><li class="inactive"><a href="cha.obs.concepts.html"><span class="number">21 </span><span class="name">OBS Concepts</span></a></li><li class="inactive"><a href="cha.obs.build_process.html"><span class="number">22 </span><span class="name">Build Process</span></a></li><li class="inactive"><a href="cha.obs.build_containers.html"><span class="number">23 </span><span class="name">Build Containers</span></a></li><li class="inactive"><a href="cha.obs.source_management.html"><span class="number">24 </span><span class="name">Source Management</span></a></li><li class="inactive"><a href="cha.obs.scm_bridge.html"><span class="number">25 </span><span class="name">SCM Bridge [EXPERIMENTAL]</span></a></li><li class="inactive"><a href="cha.obs.supported_formats.html"><span class="number">26 </span><span class="name">Supported Formats</span></a></li><li class="inactive"><a href="cha.obs.request_and_review_system.html"><span class="number">27 </span><span class="name">Request And Review System</span></a></li><li class="inactive"><a href="cha.obs.image_templates.html"><span class="number">28 </span><span class="name">Image Templates</span></a></li><li class="inactive"><a href="cha.obs.multibuild.html"><span class="number">29 </span><span class="name">Multiple Build Description File Handling</span></a></li><li class="inactive"><a href="cha.obs.maintenance_setup.html"><span class="number">30 </span><span class="name">Maintenance Support</span></a></li><li class="inactive"><a href="cha.obs.binary_tracking.html"><span class="number">31 </span><span class="name">Binary Package Tracking</span></a></li><li class="inactive"><a href="cha.obs.admin.html"><span class="number">32 </span><span class="name">Administration</span></a></li><li class="inactive"><a href="cha.obs.build_scheduling_and_dispatching.html"><span class="number">33 </span><span class="name">Scheduling and Dispatching</span></a></li><li class="inactive"><a href="cha.obs.build_job_constraints.html"><span class="number">34 </span><span class="name">Build Job Constraints</span></a></li><li class="inactive"><a href="cha.obs.build_preinstall.html"><span class="number">35 </span><span class="name">Building Preinstall Images</span></a></li><li class="inactive"><a href="cha.obs.authorization.token.html"><span class="number">36 </span><span class="name">Authorization</span></a></li><li class="inactive"><a href="cha.obs.qa_hooks.html"><span class="number">37 </span><span class="name">Quality Assurance(QA) Hooks</span></a></li><li class="inactive"><a href="cha.obs.factory.html"><span class="number">38 </span><span class="name">openSUSE Factory</span></a></li></ol></li><li class="inactive"><a href="obs.glossary.html"><span class="number"> </span><span class="name">Glossary</span></a></li><li class="inactive"><a href="bk02apa.html"><span class="number">A </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 33. Scheduling and Dispatching" href="cha.obs.build_scheduling_and_dispatching.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 35. Building Preinstall Images" href="cha.obs.build_preinstall.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="User Guide"><span class="book-icon">User Guide</span></a><span> › </span><a class="crumb" href="par.reference.html">Reference</a><span> › </span><a class="crumb" href="cha.obs.build_job_constraints.html">Build Job Constraints</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 33. Scheduling and Dispatching" href="cha.obs.build_scheduling_and_dispatching.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 35. Building Preinstall Images" href="cha.obs.build_preinstall.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class=""><div class="documentation"><div class="chapter " id="cha.obs.build_job_constraints"><div class="titlepage"><div><div><h2 class="title"><span class="number">34 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Build Job Constraints</span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#">#</a></h2></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha.obs.build_job_constraints.html#id-1.5.10.16.11"><span class="number">34.1 </span><span class="name"><code class="literal">hostlabel</code></span></a></span></dt><dt><span class="sect1"><a href="cha.obs.build_job_constraints.html#id-1.5.10.16.12"><span class="number">34.2 </span><span class="name"><code class="literal">sandbox</code></span></a></span></dt><dt><span class="sect1"><a href="cha.obs.build_job_constraints.html#id-1.5.10.16.13"><span class="number">34.3 </span><span class="name"><code class="literal">linux</code></span></a></span></dt><dt><span class="sect1"><a href="cha.obs.build_job_constraints.html#id-1.5.10.16.14"><span class="number">34.4 </span><span class="name"><code class="literal">hardware</code></span></a></span></dt><dt><span class="sect1"><a href="cha.obs.build_job_constraints.html#id-1.5.10.16.15"><span class="number">34.5 </span><span class="name">Constraint Handling</span></a></span></dt><dt><span class="sect1"><a href="cha.obs.build_job_constraints.html#id-1.5.10.16.16"><span class="number">34.6 </span><span class="name">Checking Constraints with <code class="command">osc</code></span></a></span></dt></dl></div></div><p> Build job constraints can define requirements for the hardware or
  software of the build host. Constraints can be defined per package or for
  repositories. </p><p> The build constraints for an entire project or specific repositories is
  part of the project config. For each constraint, it contains a line</p><div class="verbatim-wrap"><pre class="screen">Constraint: &lt;SELECTOR&gt; &lt;STRING&gt;</pre></div><p>The selector is a colon-separated list. </p><p> The build constraints for a package are part of the package sources, as
  a _constraints XML source file (validated on submission). The _constraints
  source file can contain the values listed below. </p><p>In addition to that some build recipe parsers support to parse constraints
  also from the build descriptions, eg. in spec files. These can also be used
  conditionally in their context. For example to apply these only on some architectures
  or only for specific multibuild flavors.</p><p>Constraints defined in project build config, _constraints and the build recipe are merged
  in this order. This means a constraint for the same topic overwrites the one from the former location.</p><p>NOTE: If no build host meets the constraints, the package will turn to a failed state.</p><div class="sect1 " id="id-1.5.10.16.11"><div class="titlepage"><div><div><h2 class="title"><span class="number">34.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">hostlabel</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.11">#</a></h2></div></div></div><p> The hostlabel is any string which can be assigned to build hosts when
   starting the bs_worker process. It can be used to run on specific hosts,
   which may be used for running benchmarks in a reproducible way. This
   constraint can also be defined as a negative definition using the
   <code class="literal">exclude=true</code>
   attribute. However, the hostlabel is always specific to one OBS instance.
   You should avoid it as much as possible, since building with this constraint
   in another instance is usually not possible. Use any of the other
   constraints if possible. </p><p> Example for _constraints file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints exclude="false"&gt;
  &lt;hostlabel&gt;benchmark_runner&lt;/hostlabel&gt;
&lt;/constraints&gt;</pre></div><p>Example for project configuration:  </p><div class="verbatim-wrap"><pre class="screen">Constraint: hostlabel benchmark_runner</pre></div><p>Example for rpm spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: hostlabel benchmark_runner</pre></div></div><div class="sect1 " id="id-1.5.10.16.12"><div class="titlepage"><div><div><h2 class="title"><span class="number">34.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">sandbox</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.12">#</a></h2></div></div></div><p> Defines the sandbox which is used for the build job. Sandboxes are
   chroot, Xen or KVM environments. There is also the virtual secure sandbox,
   which allows building on Xen or KVM. This constraints may also be defined as
   a negative definition via the <code class="literal">exclude=true</code> attribute. </p><p> Example for <code class="filename">_constraints</code> file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints exclude="true"&gt;
  &lt;sandbox&gt;secure&lt;/sandbox&gt;
&lt;/constraints&gt;</pre></div><p>Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: sandbox secure</pre></div><p>Example for rpm spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: hostlabel:benchmark_runner</pre></div></div><div class="sect1 " id="id-1.5.10.16.13"><div class="titlepage"><div><div><h2 class="title"><span class="number">34.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">linux</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.13">#</a></h2></div></div></div><p> The Linux kernel specific part. </p><div class="sect2 " id="id-1.5.10.16.13.3"><div class="titlepage"><div><div><h3 class="title"><span class="number">34.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">version</span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.13.3">#</a></h3></div></div></div><p> To require a specific Linux kernel version. </p><p> Example for _constraints file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints&gt;
  &lt;linux&gt;&lt;version&gt;
    &lt;min&gt;3.0&lt;/min&gt;
    &lt;max&gt;4.0&lt;/max&gt;
  &lt;/version&gt;&lt;/linux&gt;
&lt;/constraints&gt;</pre></div><p>Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: linux:version:min 3.0
Constraint: linux:version:max 4.0</pre></div><p>Example for rpm spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: linux:version:min 3.0
#!BuildConstraint: linux:version:max 4.0</pre></div><div class="sect3 " id="id-1.5.10.16.13.3.9"><div class="titlepage"><div><div><h4 class="title"><span class="number">34.3.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">min</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.13.3.9">#</a></h4></div></div></div><p> Minimal kernel version. </p></div><div class="sect3 " id="id-1.5.10.16.13.3.10"><div class="titlepage"><div><div><h4 class="title"><span class="number">34.3.1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">max</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.13.3.10">#</a></h4></div></div></div><p> Maximal kernel version. </p></div></div><div class="sect2 " id="id-1.5.10.16.13.4"><div class="titlepage"><div><div><h3 class="title"><span class="number">34.3.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">flavor</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.13.4">#</a></h3></div></div></div><p> A specific kernel flavor like default or smp (from kernel packages
    kernel-default or kernel-smp). </p><p> Example for _constraints file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints&gt;
  &lt;linux&gt;
    &lt;flavor&gt;default&lt;/flavor&gt;
  &lt;/linux&gt;
&lt;/constraints&gt;</pre></div><p>Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: linux:flavor default</pre></div><p>Example for rpm spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: linux:flavor default</pre></div></div></div><div class="sect1 " id="id-1.5.10.16.14"><div class="titlepage"><div><div><h2 class="title"><span class="number">34.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">hardware</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.14">#</a></h2></div></div></div><p> To require hardware or build instance features. </p><div class="sect2 " id="id-1.5.10.16.14.3"><div class="titlepage"><div><div><h3 class="title"><span class="number">34.4.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">cpu</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.14.3">#</a></h3></div></div></div><p> To require a specific CPU feature. </p><div class="sect3 " id="id-1.5.10.16.14.3.3"><div class="titlepage"><div><div><h4 class="title"><span class="number">34.4.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">flag</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.14.3.3">#</a></h4></div></div></div><p> CPU features which are provided by the hardware. On Linux they can
     be found in /proc/cpuinfo. The flag element may be used multiple times to
     require multiple CPU features. </p><p> Example for _constraints file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints&gt;
  &lt;hardware&gt;&lt;cpu&gt;
    &lt;flag&gt;mmx&lt;/flag&gt;
    &lt;flag&gt;sse2&lt;/flag&gt;
  &lt;/cpu&gt;&lt;/hardware&gt;
&lt;/constraints&gt;</pre></div><p> Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: hardware:cpu:flag mmx
Constraint: hardware:cpu:flag sse2</pre></div><p>Example for rpm spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: hardware:cpu:flag mmx
#!BuildConstraint: hardware:cpu:flag sse2</pre></div><p>
      <code class="literal">EL0</code> is a special flag that that can be used on
      hardware that only supports level-0 exceptions, such as certain armv8l
      systems.
      This means that VMs or 32-bit kernels are not supported but userland is
      supported.
      This flag can be used to block builds on such hardware if no 64-bit
      kernel is available for a project.
     </p><p>Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: hardware:cpu:flag exclude=true EL0</pre></div><p>Example for rpm spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: hardware:cpu:flag exclude=true EL0</pre></div><p>
      Additional flags are also reported for effective architecture level of
      the cpu. This includes the following flags:
      </p><div class="itemizedlist "><ul class="itemizedlist"><li class="listitem "><p>power7</p></li><li class="listitem "><p>power8</p></li><li class="listitem "><p>power9</p></li><li class="listitem "><p>x86-64-v2</p></li><li class="listitem "><p>x86-64-v3</p></li><li class="listitem "><p>x86-64-v4</p></li></ul></div><p>
     </p></div></div><div class="sect2 " id="id-1.5.10.16.14.4"><div class="titlepage"><div><div><h3 class="title"><span class="number">34.4.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">processors</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.14.4">#</a></h3></div></div></div><p>To require a minimal number of processors provided by the VM.</p><p> Example for _constraints file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints&gt;
  &lt;hardware&gt;
    &lt;processors&gt;4&lt;/processors&gt;
  &lt;/hardware&gt;
&lt;/constraints&gt;</pre></div><p>Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: hardware:processors 4</pre></div><p>Example for rpm spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: hardware:processors 4</pre></div></div><div class="sect2 " id="id-1.5.10.16.14.5"><div class="titlepage"><div><div><h3 class="title"><span class="number">34.4.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">jobs</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.14.5">#</a></h3></div></div></div><p> To require a minimal number of pre-confiured parallel jobs for the build job. 
          This limits the parallel wanted jobs for the build tooling, but is actually not
          a hardware requirement.</p><p> Example for _constraints file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints&gt;
  &lt;hardware&gt;
    &lt;jobs&gt;4&lt;/jobs&gt;
  &lt;/hardware&gt;
&lt;/constraints&gt;</pre></div><p>Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: hardware:jobs 4</pre></div><p>Example for rpm spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: hardware:jobs 4</pre></div></div><div class="sect2 " id="id-1.5.10.16.14.6"><div class="titlepage"><div><div><h3 class="title"><span class="number">34.4.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">disk</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.14.6">#</a></h3></div></div></div><p> Hard disk specific. </p><div class="sect3 " id="id-1.5.10.16.14.6.3"><div class="titlepage"><div><div><h4 class="title"><span class="number">34.4.4.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">size</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.14.6.3">#</a></h4></div></div></div><p> To require a minimal size of the disk. </p><p> Example for _constraints file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints&gt;
  &lt;hardware&gt;
    &lt;disk&gt;
      &lt;size unit="G"&gt;4&lt;/size&gt;
    &lt;/disk&gt;
  &lt;/hardware&gt;
&lt;/constraints&gt;</pre></div><p>Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: hardware:disk:size unit=G 4</pre></div><p>Example for rpm spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: hardware:disk:size unit=G 4</pre></div></div></div><div class="sect2 " id="id-1.5.10.16.14.7"><div class="titlepage"><div><div><h3 class="title"><span class="number">34.4.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">memory</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.14.7">#</a></h3></div></div></div><p> Memory specific. </p><div class="sect3 " id="id-1.5.10.16.14.7.3"><div class="titlepage"><div><div><h4 class="title"><span class="number">34.4.5.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">size</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.14.7.3">#</a></h4></div></div></div><p> To require a minimal memory size including swap space. </p><p> Example for _constraints file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints&gt;
  &lt;hardware&gt;
    &lt;memory&gt;
      &lt;size unit="M"&gt;1400&lt;/size&gt;
    &lt;/memory&gt;
  &lt;/hardware&gt;
&lt;/constraints&gt;</pre></div><p> Example for project configuration:</p><div class="verbatim-wrap"><pre class="screen">Constraint: hardware:memory:size unit=M 1400</pre></div><p>Example for rpm spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: hardware:memory:size unit=M 1400</pre></div></div></div><div class="sect2 " id="id-1.5.10.16.14.8"><div class="titlepage"><div><div><h3 class="title"><span class="number">34.4.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">physicalmemory</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.14.8">#</a></h3></div></div></div><p> Memory specific. </p><div class="sect3 " id="id-1.5.10.16.14.8.3"><div class="titlepage"><div><div><h4 class="title"><span class="number">34.4.6.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name"><code class="literal">size</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.14.8.3">#</a></h4></div></div></div><p> To require a minimal memory size. Swap space is not taken into
     account here. </p><p> Example for _constraints file:</p><div class="verbatim-wrap"><pre class="screen">&lt;constraints&gt;
  &lt;hardware&gt;
    &lt;physicalmemory&gt;
      &lt;size unit=M&gt;1400&lt;/size&gt;
    &lt;/physicalmemory&gt;
  &lt;/hardware&gt;
&lt;/constraints&gt;</pre></div><p>Example for project configuration: </p><div class="verbatim-wrap"><pre class="screen">Constraint: hardware:physicalmemory:size unit=M 1400</pre></div><p>Example for rpm spec file or Dockerfile:</p><div class="verbatim-wrap"><pre class="screen">#!BuildConstraint: hardware:physicalmemory:size unit=M 1400</pre></div></div></div></div><div class="sect1 " id="id-1.5.10.16.15"><div class="titlepage"><div><div><h2 class="title"><span class="number">34.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Constraint Handling</span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.15">#</a></h2></div></div></div><p> The constraint handling depends on what is met by the restrictions.
   The handling starts when there is no worker to fulfill the constraints. </p><div class="sect2 " id="id-1.5.10.16.15.3"><div class="titlepage"><div><div><h3 class="title"><span class="number">34.5.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">More than half of the workers satisfy the constraints</span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.15.3">#</a></h3></div></div></div><p> The job will just stay in state scheduled and no further notification
    is set. </p></div><div class="sect2 " id="id-1.5.10.16.15.4"><div class="titlepage"><div><div><h3 class="title"><span class="number">34.5.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Less than Half of the Workers Satisfy the Constraints</span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.15.4">#</a></h3></div></div></div><p> The job will stay in state scheduled and the dispatch details are set
    to tell the user that this job can take a long time to be built. This will
    be shown in the Web UI on mouse over and the scheduled state will be
    highlighted as well.</p><div class="verbatim-wrap"><pre class="screen">waiting for 4 compliant workers (4 down)</pre></div><p>The <code class="command">(4
     down)</code> means that 4 of the 4 compliant workers are down and that
    someone should have a look. </p></div><div class="sect2 " id="id-1.5.10.16.15.5"><div class="titlepage"><div><div><h3 class="title"><span class="number">34.5.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">No Workers Satisfy the Constraints</span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.15.5">#</a></h3></div></div></div><p> If no worker can handle the constraints defined by the package or
    project the build job fails. There is also a hint in the build log what has
    failed.</p><div class="verbatim-wrap"><pre class="screen">package build was not possible:

no compliant workers (constraints mismatch hint: hardware:processors sandbox)

Please adapt your constraints.</pre></div></div></div><div class="sect1 " id="id-1.5.10.16.16"><div class="titlepage"><div><div><h2 class="title"><span class="number">34.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Checking Constraints with <code class="command">osc</code></span> <a title="Permalink" class="permalink" href="cha.obs.build_job_constraints.html#id-1.5.10.16.16">#</a></h2></div></div></div><p> You can check the constraints of a project / package with the osc
   tool. You have to be in an osc working directory.</p><div class="verbatim-wrap"><pre class="screen"><code class="command">osc checkconstraints [OPTS] REPOSITORY ARCH CONSTRAINTSFILE</code></pre></div><p>Either you give a repository and an arch or osc will check the constraints
   for all repository / arch pairs for the package. A few examples:</p><div class="verbatim-wrap"><pre class="screen"><code class="command"># osc checkconstraints</code>
Repository                Arch                      Worker
----------                ----                      ------
openSUSE_Leap_42.2        x86_64                    1
openSUSE_Leap_42.1        x86_64                    1</pre></div><p>If no file is given it takes the local _constraints file. If this file does
   not exist or the --ignore-file switch is set only the project constraints
   are used.</p><div class="verbatim-wrap"><pre class="screen"><code class="command"># osc checkconstraints openSUSE_Leap_42.1 x86_64</code>
Worker
------
x86_64:worker:1
x86_64:worker:2</pre></div><p>If a repository and an arch is given a list of compliant workers is
   returned. </p><p> Another command to verify a worker and display the worker information
   is osc workerinfo. </p><div class="verbatim-wrap"><pre class="screen">&lt;worker hostarch="x86_64" registerserver="http://localhost:5252" workerid="worker:1"&gt;
  &lt;hostlabel&gt;MY_WORKER_LABEL_1&lt;/hostlabel&gt;
  &lt;sandbox&gt;chroot&lt;/sandbox&gt;
  &lt;linux&gt;
    &lt;version&gt;4.1.34-33&lt;/version&gt;
    &lt;flavor&gt;default&lt;/flavor&gt;
  &lt;/linux&gt;
  &lt;hardware&gt;
    &lt;cpu&gt;
      &lt;flag&gt;fpu&lt;/flag&gt;
      &lt;flag&gt;vme&lt;/flag&gt;
      &lt;flag&gt;de&lt;/flag&gt;
    &lt;/cpu&gt;
    &lt;processors&gt;2&lt;/processors&gt;
    &lt;jobs&gt;1&lt;/jobs&gt;
  &lt;/hardware&gt;
&lt;/worker&gt;</pre></div><p> It returns the information of the desired worker. </p></div></div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha.obs.build_preinstall.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 35 </span>Building Preinstall Images</span></a><a class="nav-link" href="cha.obs.build_scheduling_and_dispatching.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 33 </span>Scheduling and Dispatching</span></a></div><div class="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span class="_share-fb bottom-button">Facebook</span><span class="spacer"> • </span><span class="_share-in bottom-button">LinkedIn</span><span class="spacer"> • </span><span class="_share-tw bottom-button">Twitter</span><span class="spacer"> • </span><span class="_share-mail bottom-button">E-Mail</span></span></div><div class="print"><span class="_print-button bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2023 
        SUSE</p><ul><li><a href="https://jobs.suse.com/" target="_top">Careers</a></li><li><a href="https://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="https://www.suse.com/company/about/" target="_top">About</a></li><li><a href="https://www.suse.com/contact/" target="_top">Contact Us</a></li></ul></div></div></body></html>