<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Beginnerʼs Guide | Open Build Service</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 3.0.0 (https://opensuse.github.io/daps) using SUSE XSL Stylesheets 2.0.13 (based on DocBook XSL Stylesheets snapshot) - chunked" /><meta name="product-name" content="Open Build Service" /><meta name="book-title" content="Beginnerʼs Guide" /><meta name="description" content="This guide describes basic workflows for working with packages on Open Build Service. This includes checking out a package from an upstream project, creating patches, branching a repository, and more." /><link rel="home" href="index.html" title="OBS Documentation" /><link rel="up" href="book.obs.techpaper.html" title="Technical Papers" /><link rel="prev" href="book.obs.techpaper.html" title="Technical Papers" /><link rel="next" href="book.obs.user.html" title="User Guide" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="offline js-off"><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="single-crumb" href="art.obs.bg.html"><span class="single-contents-icon"></span>Beginnerʼs Guide</a><div class="bubble-corner active-contents"></div></div><div class="clearme"></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="single-crumb" href="art.obs.bg.html"><span class="single-contents-icon"></span>Show Contents: Beginnerʼs Guide</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="clearme"></div></div><div class="clearme"></div></div><div class="active-contents bubble"><div class="bubble-container"><div id="_bubble-toc"><ol><li class="inactive"><a href="art.obs.bg.html#sec.obsbg.targetaudience"><span class="number">1 </span><span class="name">Target Audience</span></a></li><li class="inactive"><a href="art.obs.bg.html#sec.obsbg.concept"><span class="number">2 </span><span class="name">Conceptual Overview</span></a></li><li class="inactive"><a href="art.obs.bg.html#sec.obsbg.req"><span class="number">3 </span><span class="name">Requirements for Working with the <code class="command">osc</code> Command-Line Tool</span></a></li><li class="inactive"><a href="art.obs.bg.html#sec.obsbg.usagescenarios"><span class="number">4 </span><span class="name">Covered Scenarios</span></a></li><li class="inactive"><a href="art.obs.bg.html#sec.obsbg.obsconfig"><span class="number">5 </span><span class="name">Configuring Your System for OBS</span></a></li><li class="inactive"><a href="art.obs.bg.html#sec.obsbg.uc.setuphome"><span class="number">6 </span><span class="name">Setting Up Your Home Project for the First Time</span></a></li><li class="inactive"><a href="art.obs.bg.html#sec.obsbg.uc.newprj"><span class="number">7 </span><span class="name">Creating a New Project</span></a></li><li class="inactive"><a href="art.obs.bg.html#sec.obsbg.uc.patching"><span class="number">8 </span><span class="name">Patching Source Code</span></a></li><li class="inactive"><a href="art.obs.bg.html#sec.obsbg.uc.branchprj"><span class="number">9 </span><span class="name">Branching a Package</span></a></li><li class="inactive"><a href="art.obs.bg.html#sec.obsbg.uc.install-from-obs"><span class="number">10 </span><span class="name">Installing Packages from OBS</span></a></li><li class="inactive"><a href="art.obs.bg.html#sec.obsbg.cheatsheet"><span class="number">11 </span><span class="name">Other Useful <code class="command">osc</code> Commands</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_toc-bubble-wrap"></div><div id="_content" class=""><div class="documentation"><div xml:lang="en" class="article " id="art.obs.bg" lang="en"><div class="titlepage"><div><h6 class="version-info"><span class="productname ">Open Build Service</span></h6><div><h1 class="title">Beginnerʼs Guide </h1></div><div class="abstract "><p>
    This guide describes basic workflows for working with packages on
    Open Build Service. This includes checking out a package from an upstream project,
    creating patches, branching a repository, and more.
   </p></div><div class="date"><span class="imprint-label">Publication Date: </span>12/05/2019</div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="art.obs.bg.html#sec.obsbg.targetaudience"><span class="number">1 </span><span class="name">Target Audience</span></a></span></dt><dt><span class="sect1"><a href="art.obs.bg.html#sec.obsbg.concept"><span class="number">2 </span><span class="name">Conceptual Overview</span></a></span></dt><dt><span class="sect1"><a href="art.obs.bg.html#sec.obsbg.req"><span class="number">3 </span><span class="name">Requirements for Working with the <code class="command">osc</code> Command-Line Tool</span></a></span></dt><dt><span class="sect1"><a href="art.obs.bg.html#sec.obsbg.usagescenarios"><span class="number">4 </span><span class="name">Covered Scenarios</span></a></span></dt><dt><span class="sect1"><a href="art.obs.bg.html#sec.obsbg.obsconfig"><span class="number">5 </span><span class="name">Configuring Your System for OBS</span></a></span></dt><dt><span class="sect1"><a href="art.obs.bg.html#sec.obsbg.uc.setuphome"><span class="number">6 </span><span class="name">Setting Up Your Home Project for the First Time</span></a></span></dt><dt><span class="sect1"><a href="art.obs.bg.html#sec.obsbg.uc.newprj"><span class="number">7 </span><span class="name">Creating a New Project</span></a></span></dt><dt><span class="sect1"><a href="art.obs.bg.html#sec.obsbg.uc.patching"><span class="number">8 </span><span class="name">Patching Source Code</span></a></span></dt><dt><span class="sect1"><a href="art.obs.bg.html#sec.obsbg.uc.branchprj"><span class="number">9 </span><span class="name">Branching a Package</span></a></span></dt><dt><span class="sect1"><a href="art.obs.bg.html#sec.obsbg.uc.install-from-obs"><span class="number">10 </span><span class="name">Installing Packages from OBS</span></a></span></dt><dt><span class="sect1"><a href="art.obs.bg.html#sec.obsbg.cheatsheet"><span class="number">11 </span><span class="name">Other Useful <code class="command">osc</code> Commands</span></a></span></dt></dl></div></div><div><div class="legalnotice" id="id-1.4.3.2.2">
 
    <p>
  Copyright © 2006–
2019

  SUSE LLC and contributors. All rights reserved.
 </p>
 <p>
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.2 or (at
  your option) version 1.3; with the Invariant Section being this copyright
  notice and license. A copy of the license version 1.2 is included in the
  section entitled <span class="quote">“<span class="quote ">GNU Free Documentation License</span>”</span>.
 </p>
 <p>
  For SUSE trademarks, see
  <a class="ulink" href="http://www.suse.com/company/legal/" target="_blank">http://www.suse.com/company/legal/</a>. All other
  third-party trademarks are the property of their respective owners. Trademark
  symbols (®, ™ etc.) denote trademarks of SUSE and its affiliates.
  Asterisks (*) denote third-party trademarks.
 </p>
 <p>
  All information found in this book has been compiled with utmost attention
  to detail. However, this does not guarantee complete accuracy. Neither
  SUSE LLC, its affiliates, the authors nor the translators shall be held
  liable for possible errors or the consequences thereof.
 </p>
</div></div>
 
 

 <div class="sect1 " id="sec.obsbg.targetaudience"><div class="titlepage"><div><div><h2 class="title" id="sec.obsbg.targetaudience"><span class="number">1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Target Audience</span> <a title="Permalink" class="permalink" href="art.obs.bg.html#sec.obsbg.targetaudience">#</a></h2></div></div></div>
  
  <p>
   This document is intended for users and developers interested in
   building packages from source code for different platforms and Linux distributions.
   Basic knowledge of Linux and the command line usage is
   recommended.
  </p>
  
 </div>

 <div class="sect1 " id="sec.obsbg.concept"><div class="titlepage"><div><div><h2 class="title" id="sec.obsbg.concept"><span class="number">2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Conceptual Overview</span> <a title="Permalink" class="permalink" href="art.obs.bg.html#sec.obsbg.concept">#</a></h2></div></div></div>
  
  <p>
   Created in 2005, the Open Build Service (OBS) is a generic system for building and
   distributing packages or images from source code in an automatic, consistent,
   and reproducible way.
   OBS can create images and installable packages for a wide range
   of operating systems
   (SUSE, Debian, Ubuntu, Red Hat, Windows, etc.) and hardware architectures
   (x86, AMD64, z Systems, POWER etc.).
  </p>
  <div class="sect2 " id="sec.obsbg.concept.pkgspec"><div class="titlepage"><div><div><h3 class="title" id="sec.obsbg.concept.pkgspec"><span class="number">2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Build Recipe</span> <a title="Permalink" class="permalink" href="art.obs.bg.html#sec.obsbg.concept.pkgspec">#</a></h3></div></div></div>
   
   <p>
    To create a package in OBS, you need a <em class="firstterm ">build recipe</em>
    which contains the following information:
   </p>
   <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
     <p>
      <span class="formalpara-title">Metadata. </span>
      The package name and the description are mandatory. Other data
       such as the version, the license, the upstream URL
       is optional.
     </p>
    </li><li class="listitem ">
     <p>
      <span class="formalpara-title">Requirements. </span>
      
       Packages depend on other packages to function properly.
       There are two types of requirements:
       <span class="emphasis"><em>build requirements</em></span> and
       <span class="emphasis"><em>installation requirements</em></span>.
      
     </p>
     <p>
      Build requirements are dependencies which are needed during the
      build process in OBS. For example, a C++ program needs
      a C++ compiler.
     </p>
     <p>
      Installation requirements are dependencies which are needed when installing
      the final package.
     </p>
    </li><li class="listitem ">
     <p>
      <span class="formalpara-title">A Package List. </span>
      
       To successfully install and remove a package and all its contents,
       the package manager needs to know which files and directories belong to
       which package.
      
     </p>
    </li></ul></div>
   <p>
    For RPM-based operating systems such as openSUSE, SUSE Linux Enterprise, or Red Hat Enterprise Linux, all
    the information above is included
    in a file with the file extension <code class="filename">.spec</code>.
   </p>
  </div>
  <div class="sect2 " id="sec.obsbg.buildhost"><div class="titlepage"><div><div><h3 class="title" id="sec.obsbg.buildhost"><span class="number">2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Build Hosts and Packages</span> <a title="Permalink" class="permalink" href="art.obs.bg.html#sec.obsbg.buildhost">#</a></h3></div></div></div>
   
  <p>
   The OBS server provides a Web interface and an API. The API is
   used by the <code class="command">osc</code> command-line tool.
  </p>
  <p>
   To build the package, the back end creates a sandbox with
   the respective distribution. This sandbox is isolated from
   the rest of the host system.
   Depending on the build recipe (on RPM-based systems, this is a
   <em class="firstterm ">spec file</em>), other packages
   are downloaded and installed prior to building.
  </p>
  <p>
   The build process executes all the instructions that it finds in the build
   recipe.
   If the build is successful, the files which belong to the package
   are installed into the sandbox. From those sandboxed files, the final RPM
   package is created and moved into a download area, the
   <span class="emphasis"><em>download repository</em></span>.
  </p>
  <p>
    End users can install the package using their preferred package management
    tools. On a SUSE-based system, you can use YaST or Zypper command-line
    tool to install an RPM version of the package.
  </p>
  <p>
   Other OBS-related services (like the notification server, mirror
   interface, etc.) perform very specific tasks and therefore beyond the
   scope of this guide.
  </p>
  <p>
   The schematic in <a class="xref" href="art.obs.bg.html#fig.obsbg.concept" title="Conceptual Overview of Open Build Service">Figure 1, “Conceptual Overview of Open Build Service”</a> shows the components
   in context.
  </p>
  <div class="figure" id="fig.obsbg.concept"><div class="figure-contents">
   
   <div class="mediaobject"><a xmlns="" href="images/obs-concept.svg"><img src="images/obs-concept.svg" width="" alt="Conceptual Overview of Open Build Service" /></a></div>
  </div><div class="figure-title-wrap"><h6 class="figure-title"><span class="number">Figure 1: </span><span class="name">Conceptual Overview of Open Build Service </span><a title="Permalink" class="permalink" href="art.obs.bg.html#fig.obsbg.concept">#</a></h6></div></div>
  </div>
  <div class="sect2 " id="sec.obsbg.project"><div class="titlepage"><div><div><h3 class="title" id="sec.obsbg.project"><span class="number">2.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Projects and Packages</span> <a title="Permalink" class="permalink" href="art.obs.bg.html#sec.obsbg.project">#</a></h3></div></div></div>
   
   <p>
    In OBS, packages are organized in <span class="emphasis"><em>projects</em></span>.
    A single project can contain several packages, and it usually serves a specific
    organizational purpose. Generic access control, related repositories, and
    build targets (operating systems and architectures) are all defined on
    the project level.
   </p>
   <p>
    Projects can also have other projects (subprojects) to structure work.
    They are isolated from their parent project and can be configured
    individually.
   </p>
   <p>
    Each project name is separated by colon.
    For example, in the openSUSE Build Service, packages for fonts are
    collected in the project
    <code class="uri">M17N:fonts</code> which is a subproject of <code class="uri">M17N</code>.
    Packages for the Python programming
    language are available in the <code class="uri">devel:languages:python</code> project
    which is a subproject of <code class="uri">devel:languages</code> which itself is a
    subproject of <code class="uri">devel</code>.
   </p>
   <p>
    As a user, you will normally build packages in your
    <em class="firstterm ">home project</em>, available
    in OBS as <code class="uri">home:<em class="replaceable ">USERNAME</em></code>.
    Home projects serve as a personal working area in OBS to define build
    targets, upload, build, and download packages. Users are also permitted
    to create subprojects for temporary subprojects to work on other people's packages. 
   </p>
   <p>
    Sometimes, you will see the <code class="uri">obs://<em class="replaceable ">DOMAIN</em>/<em class="replaceable ">PROJECT</em></code>
    notation. The <code class="uri">obs://</code> schema is a shorthand to abbreviate the
    long URL and needs to be replaced by the real OBS instance URL.
   </p>
  </div>
 </div>

 <div class="sect1 " id="sec.obsbg.req"><div class="titlepage"><div><div><h2 class="title" id="sec.obsbg.req"><span class="number">3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Requirements for Working with the <code class="command">osc</code> Command-Line Tool</span> <a title="Permalink" class="permalink" href="art.obs.bg.html#sec.obsbg.req">#</a></h2></div></div></div>
  
  <p>
   Before you start working with Open Build Service, make sure that the following
   requirements are met.
  </p>
  <div class="variablelist "><dl class="variablelist"><dt id="vle.obsbg.req.software"><span class="term ">Software Requirements</span></dt><dd>
     <p>
      Install the <code class="command">osc</code> command line tool from your
      preferred distributions or from the OBS project
       <code class="uri">openSUSE:Tools</code>:
     </p>
     <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
       <p>
        For SUSE related systems, install the <span class="package ">osc</span>
        package with the <code class="command">zypper</code> command (replace
        <em class="replaceable ">DISTRIBUTION</em> with your distribution):
       </p>
       <div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">zypper</code> ar https://download.opensuse.org/repositories/openSUSE:/Tools/<em class="replaceable ">DISTRIBUTION</em>/openSUSE:Tools.repo
<code class="prompt root">root # </code><code class="command">zypper</code> install osc</pre></div>
      </li><li class="listitem ">
       <p>
        For other systems, use your preferred package manager.
       </p>
      </li><li class="listitem ">
       <p>
        As an alternative, you can use the AppImage file . An AppImage file
        is a packaged application which can run on many distributions.
        Download the file from <a class="ulink" href="https://download.opensuse.org/repositories/openSUSE:/Tools/AppImage/" target="_blank">https://download.opensuse.org/repositories/openSUSE:/Tools/AppImage/</a>,
        save it in your <code class="filename">~/bin</code> directory,
        and make the file executable.
       </p>
      </li></ul></div>
    </dd><dt id="id-1.4.3.5.3.2"><span class="term ">Hardware Requirements</span></dt><dd>
     <p>
      Make sure you have a minimum of 1 GB of free disk space. The
      <code class="command">osc</code> command builds all packages locally under
      <code class="filename">/var/tmp/oscbuild</code> and
      caches downloaded packages under <code class="filename">/var/tmp/osbuild-packagecache</code>.
     </p>
    </dd></dl></div>
 </div>
 
 <div class="sect1 " id="sec.obsbg.usagescenarios"><div class="titlepage"><div><div><h2 class="title" id="sec.obsbg.usagescenarios"><span class="number">4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Covered Scenarios</span> <a title="Permalink" class="permalink" href="art.obs.bg.html#sec.obsbg.usagescenarios">#</a></h2></div></div></div>
  
  <p>
   This guide is based on the following assumptions.
  </p>
  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
    <p>
     Since Git is used throughout this guide, and many OBS concepts are modeled
     after their Subversion (SVN) equivalents, you have a working knowledge of
     version control systems such as Git and Subversion (SVN).
    </p>
   </li><li class="listitem ">
    <p>
     You are using the openSUSE Build Service at <a class="ulink" href="https://build.opensuse.org" target="_blank">https://build.opensuse.org</a>.
     If you are using another OBS instance, some commands may differ.
    </p>
   </li><li class="listitem ">
    <p>You have an account on an Open Build Service instance.</p>
   </li><li class="listitem ">
    <p>You are running an RPM-based operating system like openSUSE or SUSE Linux Enterprise.</p>
   </li><li class="listitem ">
    <p>You are using a customized system as shown in <a class="xref" href="art.obs.bg.html#sec.obsbg.obsconfig" title="5. Configuring Your System for OBS">Section 5, “Configuring Your System for OBS”</a>.</p>
   </li></ul></div>
  <p>All examples use the following elements.</p>
  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
    <p>
     A user on a local machine (you) called <code class="systemitem">geeko</code>. This user builds
     packages on their own machine.
    </p>
   </li><li class="listitem ">
    <p>
     An OBS user called <code class="systemitem">obsgeeko</code> with home <code class="uri">home:obsgeeko</code> on the Open Build Service.
     This user is the same as the system user <code class="systemitem">geeko</code>, that is, you.
    </p>
   </li><li class="listitem ">
    <p>An OBS user <code class="systemitem">obstux</code> and their home <code class="uri">home:obstux</code> on Open Build Service.
     This user acts as a collaborator.
    </p>
   </li><li class="listitem ">
    <p>
     An example upstream open source project available at <a class="ulink" href="https://github.com/obs-example/my-first-obs-package" target="_blank">https://github.com/obs-example/my-first-obs-package</a>. This project contains source code in the C++ programming language.
    </p>
   </li></ul></div>
  <p>
   This guide describes the following common tasks:
  </p>
  <div class="variablelist "><dl class="variablelist"><dt id="id-1.4.3.6.7.1"><span class="term "><a class="xref" href="art.obs.bg.html#sec.obsbg.uc.setuphome" title="6. Setting Up Your Home Project for the First Time">Section 6, “Setting Up Your Home Project for the First Time”</a></span></dt><dd>
     <p>
      Setting up a home project using the OBS Web UI.
     </p>
    </dd><dt id="id-1.4.3.6.7.2"><span class="term "><a class="xref" href="art.obs.bg.html#sec.obsbg.uc.newprj" title="7. Creating a New Project">Section 7, “Creating a New Project”</a></span></dt><dd>
     <p>
      Creating packages from a basic project hosted on GitHub.
     </p>
    </dd><dt id="id-1.4.3.6.7.3"><span class="term "><a class="xref" href="art.obs.bg.html#sec.obsbg.uc.patching" title="8. Patching Source Code">Section 8, “Patching Source Code”</a></span></dt><dd>
     <p>
      Patching source code without touching the original
      source.
     </p>
    </dd><dt id="id-1.4.3.6.7.4"><span class="term "><a class="xref" href="art.obs.bg.html#sec.obsbg.uc.branchprj" title="9. Branching a Package">Section 9, “Branching a Package”</a></span></dt><dd>
     <p>
      Branching a project, making changes, and submitting back
      the changes to the original project.
     </p>
    </dd><dt id="id-1.4.3.6.7.5"><span class="term "><a class="xref" href="art.obs.bg.html#sec.obsbg.uc.install-from-obs" title="10. Installing Packages from OBS">Section 10, “Installing Packages from OBS”</a></span></dt><dd>
     <p>
      Integrating the download repository into your system
      and installing your built package.
     </p>
    </dd></dl></div>
 </div>

 <div class="sect1 " id="sec.obsbg.obsconfig"><div class="titlepage"><div><div><h2 class="title" id="sec.obsbg.obsconfig"><span class="number">5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Configuring Your System for OBS</span> <a title="Permalink" class="permalink" href="art.obs.bg.html#sec.obsbg.obsconfig">#</a></h2></div></div></div>
  
  <p>
   While it is possible to use the <code class="command">osc</code> tool without any
   configuration, it is recommended to set up your system as described below.
  </p>
  <p>
   After all dependencies are downloaded and before the actual build process
   can start, you need to enter the <code class="systemitem">root</code> password. This can be
   inconvenient when you rebuild packages frequently. The configuration
   below modifies
   the <code class="command">sudo</code> configuration to allow building packages
   without entering the <code class="systemitem">root</code> password. To maximize security, only
   specific users can have root privileges.
  </p>

  <p>
   Follow the steps below to customize <code class="command">sudo</code>.
  </p>
  <div class="procedure " id="pro.obsbg.obsconfig"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 1: </span><span class="name">Configuring <code class="command">sudo</code> </span><a title="Permalink" class="permalink" href="art.obs.bg.html#pro.obsbg.obsconfig">#</a></h6></div><div class="procedure-contents"><p>
     To allow all users in the
     <code class="systemitem">osc</code> group to build packages without
     entering the <code class="systemitem">root</code> password, do as follows.
    </p><ol class="procedure" type="1"><li class="step ">
      <p>Log in as <code class="systemitem">root</code> and create a new group <code class="systemitem">osc</code>.
       This group will contain all users which are allowed to build packages: </p>
      <div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">groupadd</code> osc</pre></div>
     </li><li class="step " id="st.oscbg.usermod">
      <p>Add users to your newly created group <code class="systemitem">osc</code> which are allowed to build packages:
      </p>
      <div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">usermod</code> -a -G osc geeko</pre></div>
      <p>Repeat this step to add other users, if necessary.</p>
     </li><li class="step ">
      <p>Run <code class="command">visudo</code> to create the sudoers file
       <code class="filename">/etc/sudoers.d/osc</code>:</p>
      <div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">visudo</code> -f /etc/sudoers.d/osc</pre></div>
     </li><li class="step ">
      <p>
       Add the following lines to create a command alias that can be executed
       only by the <code class="systemitem">osc</code> group:
      </p>
      <div class="verbatim-wrap"><pre class="screen"># sudoers file "/etc/sudoers.d/osc" for the osc group
Cmnd_Alias  OSC_CMD = /usr/bin/osc, /usr/bin/build
%osc  ALL = (ALL) NOPASSWD:OSC_CMD</pre></div>
     </li><li class="step ">
      <p>Log out of your system and log in again to apply the changes.
      </p>
     </li><li class="step ">
    <p>Create a new OBS configuration file:</p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> ls home:obsgeeko</pre></div>
    <p>
       If you run the command for the first time, you will be prompted
       to enter your OBS user name and OBS password.
      </p>
   </li></ol></div></div>

  <div id="id-1.4.3.7.6" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Alternative Directory Structure</h6>
   
  <p>
   If you prefer to separate projects and subprojects in
   directories and subdirectories, change the following line in your
   configuration file <code class="filename">~/.oscrc</code>: </p>
  <div class="verbatim-wrap"><pre class="screen">checkout_no_colon = 1</pre></div>
  <p>
   This will use an alternate layout when checking out a project. For
   example, setting the option above and checking out the home project will
   generate the <code class="filename">home/obsgeeko</code> directory structure
   instead of the single <code class="filename">home:obsgeeko</code> directory. 
  </p>
  <p>
   However, this guide uses the default configuration with colons.
  </p>
  </div>
 </div>

 <div class="sect1 " id="sec.obsbg.uc.setuphome"><div class="titlepage"><div><div><h2 class="title" id="sec.obsbg.uc.setuphome"><span class="number">6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Setting Up Your Home Project for the First Time</span> <a title="Permalink" class="permalink" href="art.obs.bg.html#sec.obsbg.uc.setuphome">#</a></h2></div></div></div>
  
  <p>
   This section shows how to set up your home project after
   creating an openSUSE account.
  </p>
  <p>
   When you log in to your home project for the first time, it will be empty.
   To build
   packages, you need to select build targets (operating systems and
   architectures) first.
   Build targets are defined project-wide and every package in a project is
   built for each build target. However, you can disable build targets for a
   specific package.
  </p>
  <p>Setting up a home project is done as shown below.</p>
  <div class="procedure " id="pro.obsbg.uc.setuphome.addrepo"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 2: </span><span class="name">Adding Global Build Targets to Your Home Project </span><a title="Permalink" class="permalink" href="art.obs.bg.html#pro.obsbg.uc.setuphome.addrepo">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step ">
    <p>
     Log in to the Open Build Service instance.
    </p>
   </li><li class="step ">
    <p>
     Click the <span class="guimenu ">Home Project</span> link in the upper-right
     corner.
    </p>
   </li><li class="step ">
    <p>
     Click the <span class="guimenu ">Repositories</span> tab, then the 
     <span class="guimenu ">Add from a Distribution</span> link.
    </p>
   </li><li class="step ">
    <p>
     Select the distributions you want to build for.</p>
    <p>
     OBS shows several Linux distributions. For SUSE distributions,
     it is recommended to activate at least openSUSE Tumbleweed
     and the latest openSUSE Leap release.
     To enable package builds for SUSE Linux Enterprise, mark one of the <span class="guimenu ">openSUSE Backports for SLE 12</span>.
    </p>
    <p>
     When you select a distribution, OBS shows a message
     that the distribution has been successfully added it to your home project.
    </p>
   </li><li class="step ">
    <p>
     Click the <span class="guimenu ">Overview</span> tab to see the available
     build targets on the right side.
    </p>
   </li></ol></div></div>
  <p>
   To add more build targets, repeat the procedure above.
  </p>
  <p>
   To fine tune your build targets, click the
   <span class="guimenu ">Repositories</span> tab, find the respective build target,
   and click the <span class="guimenu ">Edit repository</span> link.
   This shows the available architectures and additional package
   repositories you can add.
  </p>
  
 </div>

 <div class="sect1 " id="sec.obsbg.uc.newprj"><div class="titlepage"><div><div><h2 class="title" id="sec.obsbg.uc.newprj"><span class="number">7 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Creating a New Project</span> <a title="Permalink" class="permalink" href="art.obs.bg.html#sec.obsbg.uc.newprj">#</a></h2></div></div></div>
  
  <p>
   This section demonstrates how to create packages from a simple C++ project
   hosted on GitHub (the <span class="quote">“<span class="quote ">upstream project</span>”</span>). We assume that this
   project contains source code which you want to package for different
   SUSE distributions.
  </p>
  <div id="id-1.4.3.9.3" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note: Check the License First</h6>
   
   <p>
    Before building, go to the homepage of the upstream project and check the
    license. 
   </p>
   <p>
    For example, in the openSUSE Build Service, you must only redistribute packages which are
    available under an open source license.
    If you are submitting a package to openSUSE, its source code will be checked
    for license compliance. If your package is not released under an open source
    license, it will be rejected.
   </p>
   <p>
    You can find a list of already used licenses in OBS at
    <a class="ulink" href="https://license.opensuse.org" target="_blank">https://license.opensuse.org</a>.
    For more details and a comparison of open source licenses in
    general, see <a class="ulink" href="https://en.wikipedia.org/wiki/Comparison_of_free_and_open-source_software_licenses" target="_blank">https://en.wikipedia.org/wiki/Comparison_of_free_and_open-source_software_licenses</a>.
   </p>
  </div>
  <p>
   To create a package from the upstream project, follow the steps below.
  </p>
  <div class="procedure " id="pro.obsbg.uc.basicprj"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step ">
    <p>Set up your project as shown in <a class="xref" href="art.obs.bg.html#sec.obsbg.uc.setuphome" title="6. Setting Up Your Home Project for the First Time">Section 6, “Setting Up Your Home Project for the First Time”</a>.
    </p>
   </li><li class="step ">
    <p>
     In the terminal, choose or create a directory on a local partition
     that has enough space to hold the package sources.
    </p>
   </li><li class="step ">
    <p>
     Check out your home project:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> checkout home:obsgeeko</pre></div>
    <p>
     This creates an empty <code class="filename">home:obsgeeko</code> directory
     in the current directory.
     </p>
   </li><li class="step ">
    <p>Create a new package in your local <em class="firstterm ">working directory</em>:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">cd</code> home:obsgeeko
<code class="prompt user">geeko &gt; </code><code class="command">osc</code> mkpac my-first-obs-package</pre></div>
   </li><li class="step ">
    <p>
     Get the source code of the upstream project and save it in
     <code class="filename">home:obsgeeko/my-first-obs-package</code>.
    </p>
    <p>
     Download a TAR archive of the sources. You do not have to unpack it yet. 
    </p>
    <p>
     In our example, the project is hosted on GitHub and you can use the
     following URL:
     <a class="ulink" href="https://github.com/obs-example/my-first-obs-package/releases" target="_blank">https://github.com/obs-example/my-first-obs-package/releases</a>.
     If there is no published release of a project, click the <span class="guimenu ">Clone or
     download</span> button and download the latest sources using the <span class="guimenu ">Download ZIP</span> link.
    </p>
   </li><li class="step ">
    <p>
     Create the build recipe. This file contains metadata and build
     instructions.
    </p>
    <p>
     In this example, we are building an RPM for openSUSE. For RPM-based distributions, we create a <em class="firstterm ">spec file</em>. 
     The skeleton of such a spec file looks like this:
    </p>
    <div class="example" id="ex.obsbg.uc.basicprj.skeletonspec"><div class="example-title-wrap"><h6 class="example-title"><span class="number">Example 1: </span><span class="name">Skeleton of a Spec File </span><a title="Permalink" class="permalink" href="art.obs.bg.html#ex.obsbg.uc.basicprj.skeletonspec">#</a></h6></div><div class="example-contents">
     
    <div class="verbatim-wrap"><pre class="screen">#
# spec file for package my-first-obs-package
#
# -- Copyright omitted --

Name:           my-first-obs-package <span id="co.obsbg.uc.basicprj.metadata"></span><span class="callout">1</span>
Version:        0.1.0 <a class="xref" href="art.obs.bg.html#co.obsbg.uc.basicprj.metadata"><span class="callout">1</span></a>
Release:        0 <a class="xref" href="art.obs.bg.html#co.obsbg.uc.basicprj.metadata"><span class="callout">1</span></a>
License:        GPL-3.0 <a class="xref" href="art.obs.bg.html#co.obsbg.uc.basicprj.metadata"><span class="callout">1</span></a>
Group:          Documentation <a class="xref" href="art.obs.bg.html#co.obsbg.uc.basicprj.metadata"><span class="callout">1</span></a>
Summary:        Frobnication Tool <a class="xref" href="art.obs.bg.html#co.obsbg.uc.basicprj.metadata"><span class="callout">1</span></a>
Url:            https://github.com/obs-example/my-first-obs-package <a class="xref" href="art.obs.bg.html#co.obsbg.uc.basicprj.metadata"><span class="callout">1</span></a>
Source:         my-first-obs-package-%{version}.tar.gz <a class="xref" href="art.obs.bg.html#co.obsbg.uc.basicprj.metadata"><span class="callout">1</span></a>
BuildRequires:  gcc <span id="co.obsbg.uc.basicprj.buildreq"></span><span class="callout">2</span>
BuildRequires:  cmake <a class="xref" href="art.obs.bg.html#co.obsbg.uc.basicprj.buildreq"><span class="callout">2</span></a>
BuildRoot:      %{_tmppath}/%{name}-%{version}-build

%description <span id="co.obsbg.uc.basicprj.description"></span><span class="callout">3</span>
This tool frobnicates the bar with the foo when choosing the baz.

%prep <span id="co.obsbg.uc.basicprj.prep"></span><span class="callout">4</span>
%setup -q -n %{name}-%{version}

%build <span id="co.obsbg.uc.basicprj.build"></span><span class="callout">5</span>

%install <span id="co.obsbg.uc.basicprj.install"></span><span class="callout">6</span>

%files <span id="co.obsbg.uc.basicprj.files"></span><span class="callout">7</span>
%defattr(-,root,root,-)
%doc README LICENSE *.txt
%{_bindir}/*

%changelog <span id="co.obsbg.uc.basicprj.cl"></span><span class="callout">8</span></pre></div>
    <div class="calloutlist "><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#co.obsbg.uc.basicprj.metadata"><span class="callout">1</span></a> </p></td><td valign="top" align="left">
      <p>
       <span class="formalpara-title">The Header. </span>
       Metadata like package name, version, release,
       license, the RPM group, a brief summary, the upstream URL, and the name
       of the source file.
       
      </p>
     </td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.obsbg.uc.basicprj.buildreq"><span class="callout">2</span></a> </p></td><td valign="top" align="left">
      <p>
       <span class="formalpara-title">Build Requirements. </span>
       Lists package dependencies that are required for building.
        The listed packages are downloaded and installed before building
        the package.
      </p>
      
     </td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.obsbg.uc.basicprj.description"><span class="callout">3</span></a> </p></td><td valign="top" align="left">
      <p>
       <span class="formalpara-title">The Description Section. </span>
       Describes the purpose of the package and gives a comprehensive
        explanation.
      </p>
     </td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.obsbg.uc.basicprj.prep"><span class="callout">4</span></a> </p></td><td valign="top" align="left">
      <p>
       <span class="formalpara-title">The Preparation Section. </span>
       
        Prepares the sources for building. This usually includes unpacking
        them with the <code class="literal">%setup</code> macro and patching them using
        the <code class="literal">%patch</code> macro. (For more information about patching, see
        <a class="xref" href="art.obs.bg.html#sec.obsbg.uc.patching" title="8. Patching Source Code">Section 8, “Patching Source Code”</a>.)
       
      </p>
     </td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.obsbg.uc.basicprj.build"><span class="callout">5</span></a> </p></td><td valign="top" align="left">
      <p>
       <span class="formalpara-title">The Build Section. </span>
       
        Contains commands or RPM macros for building the package.
       
      </p>
      
     </td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.obsbg.uc.basicprj.install"><span class="callout">6</span></a> </p></td><td valign="top" align="left">
      <p>
       <span class="formalpara-title">The Install Section. </span>
       Contains commands or RPM macros which
       create directories or copy files to the installation location.
       
      </p>
     </td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.obsbg.uc.basicprj.files"><span class="callout">7</span></a> </p></td><td valign="top" align="left">
      <p>
       <span class="formalpara-title">The Files Section. </span>
       Lists all files and directories which belong to
        the package. Documentation-related files are marked with
        <code class="literal">%doc</code>, and they are automatically installed in the
        default documentation directory.
       
      </p>
     </td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#co.obsbg.uc.basicprj.cl"><span class="callout">8</span></a> </p></td><td valign="top" align="left">
      <p>
       <span class="formalpara-title">The Changelog Section. </span>
       This section is usually empty. Instead, OBS searches for a
       file with the extension <code class="filename">.changes</code>. If such a file exists in the project directory,
       it will be automatically included as a changelog.
       The changelog file itself contains a high level overview of the
       history of the package.
      </p>
     </td></tr></table></div>
    </div></div>
    <p>
     
     For the complete spec file, see <a class="ulink" href="https://build.opensuse.org/package/view_file/home:obsgeeko/my-first-obs-package/my-first-obs-package.spec" target="_blank">https://build.opensuse.org/package/view_file/home:obsgeeko/my-first-obs-package/my-first-obs-package.spec</a>.
    </p>
   </li><li class="step ">
    <p>Create a changelog file:</p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> vc</pre></div>
    <p>This command opens a text file with the following content in the
    default editor:</p>
    <div class="verbatim-wrap"><pre class="screen">-------------------------------------------------------------------
Fri Aug 23 12:31:41 UTC 2017 - <code class="systemitem">geeko</code>@example.com</pre></div>
    <p>
     Add a short summary of your changes.
     Usually, a changelog entry contains a high-level overview such as the
     version of the software in the package, which patches you applied,
     and other changes in your project.
    </p>
    <p>
     Save the file and leave the editor. <code class="command">osc</code> then
     creates the file <code class="filename">my-first-obs-package.changes</code>.
    </p>
    <p>Your probject directory should now look something like this:</p>
    <div class="verbatim-wrap"><pre class="screen"><span class="emphasis"><em>project directory</em></span>
     ├── my-first-obs-package-0.1.0.tar.gz
     ├── my-first-obs-package.changes
     └── my-first-obs-package.spec</pre></div>
   </li><li class="step ">
    <p>Add all the files to your working directory:</p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> add *.spec *.changes *.tar.gz</pre></div>
   </li><li class="step ">
    <p>Build the package for the default build target:</p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> build --local-package</pre></div>
    
    <p>
     The option <code class="option">--local-package</code> is used here, because the
     package is not yet submitted to OBS.
    </p>
    <p>
     The default build target is set in the osc configuration
     file <code class="filename">~/.oscrc</code> using the variable
     <code class="option">build_repository</code>. On openSUSE Build Service this is usually openSUSE Tumbleweed.
    </p>
    <p>To build the package for another build target,
     use the following command:</p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> build --local-package openSUSE_Tumbleweed x86_64 *.spec</pre></div>
   </li><li class="step ">
    <p>
     Check whether your build was successful. If everything was fine, commit the
     files to your package to your home project on OBS:</p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> commit</pre></div>
    
    <p>
     If you encounter build errors, use the <code class="command">osc buildlog</code>
     command to review them, as described below.
    </p>
   </li></ol></div></div>
  <p>To watch the current build of a specific build target, use the
   <code class="command">buildlog</code> (alias <code class="command">bl</code>) subcommand
   inside your working directory:
  </p>
  <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> buildlog openSUSE_Tumbleweed x86_64</pre></div>
 </div>

 <div class="sect1 " id="sec.obsbg.uc.patching"><div class="titlepage"><div><div><h2 class="title" id="sec.obsbg.uc.patching"><span class="number">8 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Patching Source Code</span> <a title="Permalink" class="permalink" href="art.obs.bg.html#sec.obsbg.uc.patching">#</a></h2></div></div></div>
  
  <p>
   This section describes how to patch an upstream project. We use the same
   project as shown in <a class="xref" href="art.obs.bg.html#sec.obsbg.uc.newprj" title="7. Creating a New Project">Section 7, “Creating a New Project”</a>.
  </p>
  <p>
   There are different reasons for patching a package.
  </p>
  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
    <p>
     <span class="formalpara-title">You Do Not Have Permission to Commit Upstream. </span>
    
     Often, you cannot commit changes directly to the upstream project.
     If you send changes to the upstream project, they may be integrated
     late or even be rejected.
    
    </p>
    <p>
     Patch files allow making changes while keeping source code clean and also
     allow independence from an upstream project's release cycle, coding
     style, and internal workings.
    </p>
   </li><li class="listitem ">
    <p>
     <span class="formalpara-title">Apply Security and Bug Fixes or Distribution-Specific Fixes. </span>
     
    </p>
   </li><li class="listitem ">
    <p>
     <span class="formalpara-title">Change the Source Code, So It Builds on OBS. </span>
     
    </p>
   </li><li class="listitem ">
    <p>
     <span class="formalpara-title">Improve Security and Traceability. </span>  
    
     Untouched source code in OBS is easier to check for changes than a
     modified one. The check is usually done with a checksum (MD5 or SHA).
    
    </p>
   </li><li class="listitem ">
    <p>
     <span class="formalpara-title">Improve Structure and Consistency. </span>
    
     From an organizational point of view, it is better when changes are
     separated from the source code. With the changes inside the patch file,
     everybody can see <span class="emphasis"><em>what</em></span> was changed and
     which files changes were applied to.
    
    </p>
   </li></ul></div>
  <p>
   We assume that you already have a project as described in
  <a class="xref" href="art.obs.bg.html#sec.obsbg.uc.newprj" title="7. Creating a New Project">Section 7, “Creating a New Project”</a>. The project directory should look
   similar to this:
  </p>
  <div class="verbatim-wrap"><pre class="screen"><span class="emphasis"><em>project directory</em></span>
├── my-first-obs-package-0.1.0.tar.gz
├── my-first-obs-package.changes
└── my-first-obs-package.spec</pre></div>
  <p>In our case, we want to modify the source code under
   <code class="filename">src/main.cpp</code> to change the greeting message.
  </p>
  <div class="procedure " id="id-1.4.3.10.8"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 3: </span><span class="name">Patching </span><a title="Permalink" class="permalink" href="art.obs.bg.html#id-1.4.3.10.8">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step ">
    <p>In the terminal, switch to your working directory.</p>
   </li><li class="step ">
    <p>Prepare a patch file:</p>
    <ol type="a" class="substeps ">
     <li class="step ">
      <p>Unpack the source code:</p>
      <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">tar</code> xvf my-first-obs-package-*.tar.gz</pre></div>
      <p>
       If you have downloaded the archive from GitHub, the archive contains
       a directory in the form <code class="filename"><em class="replaceable ">NAME</em>-<em class="replaceable ">VERSION</em></code>.
       In our case, unpacking the downloaded archive results in the
       <code class="filename">my-first-obs-package-0.1.0/</code> directory.
      </p>
     </li>
     <li class="step ">
      <p>
       Switch to the directory <code class="filename">my-first-obs-package-0.1.0/</code>
       and make a copy of the original C++ source file:
      </p>
      <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">cd</code> my-first-obs-package-0.1.0/
<code class="prompt user">geeko &gt; </code><code class="command">cp</code> src/main.cpp src/main.cpp.orig</pre></div>
     </li>
     <li class="step ">
      <p>Make your changes in <code class="filename">src/main.cpp</code>.</p>
     </li>
     <li class="step ">
      <p>Create a diff and carefully inspect your changes:</p>
      <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">diff</code> -u src/main.cpp.orig src/main.cpp</pre></div>
      <p>The output should look like this:</p>
      <div class="verbatim-wrap highlight diff"><pre class="screen">--- src/main.cpp.orig   2017-08-09 16:28:31.407449707 +0200
+++ src/main.cpp        2017-08-09 16:28:49.131541230 +0200
@@ -2,7 +2,7 @@

 int main()
 {
-    std::cout&lt;&lt;"Hello OBS!\n";
+    std::cout&lt;&lt;"Hello Alice!\n";

     return 0;
 }</pre></div>
     </li>
     <li class="step ">
      <p>Redirect the diff into a file:</p>
      <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">diff</code> -u src/main.cpp.orig src/main.cpp \
  &gt; ../my-first-obs-package_main.diff</pre></div>
      <p>
       You can use an arbitrary name for the patch file. However, we
       recommend giving the file a descriptive name and adding the name of the
       upstream project. If there is a bug or issue number associated with
       the patch, add
       it to the file name as well. You can either use <code class="filename">.diff</code> or <code class="filename">.patch</code> as the file extension.
      </p>
     </li>
     <li class="step ">
      <p>
       You can now remove the directory <code class="filename">my-first-obs-package-0.1.0/</code>, as it is not needed anymore.
      </p>
     </li>
    </ol>
   </li><li class="step ">
    <p>Open your spec file and add the following line in the header under
    the <code class="literal">Source</code> line like this:</p>
    <div class="verbatim-wrap"><pre class="screen">Source:         my-first-obs-package-%{version}.tar.gz
Patch0:         my-first-obs-package_main.diff</pre></div>
   </li><li class="step ">
    <p>In the <code class="literal">%prep</code> section, add the <code class="literal">%patch</code>
     macro:</p>
    <div class="verbatim-wrap"><pre class="screen">%prep
%setup -q -n %{name}-%{version}
%patch0</pre></div>
   </li><li class="step ">
    <p>
     Add your patch file to the local repository:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> add my-first-obs-package_main.diff</pre></div>
   </li><li class="step ">
    <p>Rebuild your package:</p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> build</pre></div>
   </li><li class="step ">
    <p>
     If everything was successful, commit your changes:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> commit</pre></div>
    <p>
     When prompted, specify and save a commit message.
    </p>
   </li></ol></div></div>
  <p>
   If you are dealing with a lot of patches, you might find the
   <code class="command">quilt</code> tool useful. For more information about
   <code class="command">quilt</code>, see
   <a class="ulink" href="https://savannah.nongnu.org/projects/quilt" target="_blank">https://savannah.nongnu.org/projects/quilt</a>.
  </p>
 </div>

 <div class="sect1 " id="sec.obsbg.uc.branchprj"><div class="titlepage"><div><div><h2 class="title" id="sec.obsbg.uc.branchprj"><span class="number">9 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Branching a Package</span> <a title="Permalink" class="permalink" href="art.obs.bg.html#sec.obsbg.uc.branchprj">#</a></h2></div></div></div>
  
  <p>
   This section describes how to collaborate between projects.
   You can <em class="firstterm ">branch</em> any package in
   OBS into any project that you have write permission for. By default,
   new branches are created as a subproject of your home project.
   These default branches have names beginning with <code class="uri">home:obsgeeko:branches</code>.
  </p>
  <p>
   There are different reasons to branch a package:
  </p>
  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
    <p>
     To modify the source code, building it, trying the effect of the
     changes, and submitting back changes to the original project.
     Usually, you use this workflow when you do not have write permissions for
     a project.
    </p>
   </li><li class="listitem ">
    <p>
     To make changes without affecting the original project.
    </p>
   </li><li class="listitem ">
    <p>
     To apply temporary changes to try out a different path of development.
    </p>
   </li></ul></div>
  <p>
   We assume that you have checked out the project
   <code class="uri">home:obsgeeko/my-first-obs-package</code>
   on OBS and the user <code class="systemitem">obstux</code>
   wants to change the code to change the welcome message. The code should
   then be submitted to the original project.
  </p>
  <p>
   User <code class="systemitem">obstux</code> has to perform the
   following steps.
  </p>
  <div class="procedure " id="pro.obsbg.uc.branchprj"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 4: </span><span class="name">Branching from a Project </span><a title="Permalink" class="permalink" href="art.obs.bg.html#pro.obsbg.uc.branchprj">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step ">
    <p>
     In the terminal, choose or create a directory on a local partition with
     enough free space.
    </p>
   </li><li class="step ">
    <p>Create a branch from geeko's home project:</p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">osc</code> branchco home:obsgeeko my-first-obs-package</pre></div>
    <p>This creates a branched package in OBS at <code class="uri">home:obstux:branches/my-first-obs-package</code>
     and checks out a directory
     <code class="filename">home:obstux:branches:home:obsgeeko:my-first-obs-package</code>.
    </p>
   </li><li class="step ">
    <p>Change the working directory to your checked-out branch:</p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">cd</code> home:obstux/branches/home/obsgeeko/my-first-obs-package</pre></div>
   </li><li class="step ">
    <p>Make changes as shown in <a class="xref" href="art.obs.bg.html#sec.obsbg.uc.patching" title="8. Patching Source Code">Section 8, “Patching Source Code”</a>.
    </p>
   </li><li class="step ">
    <p>Build the package for the default build target:</p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> build</pre></div>
   </li><li class="step ">
    <p>Review the build log:</p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> buildlog openSUSE_Tumbleweed x86_64</pre></div>
   </li><li class="step ">
    <p>
     Make sure all included and removed files are added to the OBS repository:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">osc</code> addremove</pre></div>
   </li><li class="step ">
    <p>
     If everything was successful, commit your changes:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> commit</pre></div>
    <p>
     When prompted, specify and save a commit message.
    </p>
   </li><li class="step ">
    <p>
     Create a submit request and finish it by adding a comment:
    </p>
    
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">osc</code> submitreq</pre></div>
    <p>
    
     Used without any options, the <code class="command">submitreq</code> command submits back
     to the package where you branched from. Note that with the submit request,
     you submit a specific version of the source. Later changes do not
     get automatically fetched by default.
    </p>
    <p>
     If there are multiple packages in a branch, all packages will
     be submitted together. To avoid that, specify the names of the source and
     destination projects and the package name:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">tux &gt; </code><code class="command">osc</code> submitreq home:obstux:branches:home:obsgeeko my-first-obs-package home:obsgeeko</pre></div>
   </li></ol></div></div>
  <p>
   User <code class="systemitem">obstux</code> has
   finished the task now and the submit request is assigned to <code class="systemitem">obsgeeko</code>. User <code class="systemitem">obsgeeko</code> can now either accept or decline
   the submit request.
  </p>
  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
    <p>
     <span class="formalpara-title">Accept the Submit Request. </span>
     The changes from user <code class="systemitem">obstux</code> will be integrated into the
     <code class="uri">home:obsgeeko</code> project. The accepted submit request will be
      closed. To make further changes, obstux needs to create a new submit
      request.
     
    </p>
   </li><li class="listitem ">
    <p>
     <span class="formalpara-title">Decline the Submit Request. </span>
     
      The changes from user <code class="systemitem">obstux</code> are not integrated into the
      <code class="uri">home:obsgeeko</code> project.
     
    </p>
    <p>
      Reasons for declining a submit requires can be build errors or style issues.
      The reviewer usually gives a reason when declining the submit
      request. User obstux can then 1) correct their submission using a new submit
      request that supersedes the previous one, 2) disagree and reopen
      the request, or 3) accept the decline and revoke the request.
    </p>
    
   </li></ul></div>
  <p>
   User <code class="systemitem">obsgeeko</code> is responsible for
   the following.
   </p><div id="id-1.4.3.11.10.2" class="admonition note normal"><img class="symbol" alt="Note" title="Note" src="static/images/icon-note.png" /><h6>Note</h6>
    <p>If preferred, the below steps can also be performed using the OBS GUI. Requests can be managed under the <span class="guimenu ">Tasks</span> tab.</p>
   </div><p>
  </p>
  <div class="procedure " id="pro.obsbg.uc.branchprj.sr"><div class="procedure-title-wrap"><h6 class="procedure-title"><span class="number">Procedure 5: </span><span class="name">Dealing with Submit Requests </span><a title="Permalink" class="permalink" href="art.obs.bg.html#pro.obsbg.uc.branchprj.sr">#</a></h6></div><div class="procedure-contents"><ol class="procedure" type="1"><li class="step ">
    <p>Show all submit requests that belong to your home project</p>
    
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> request list -s new -P home:obsgeeko</pre></div>
   </li><li class="step ">
    <p>
     Find the correct submit request. If you know the correct number you can
     use:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> request show 246</pre></div>
   </li><li class="step ">
    <p>
     Review the request and decide:
    </p>
    <ul class="stepalternatives ">
     <li class="step ">
      <p>Accept the submit request:</p>
      <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> request accept 246 --message="Reviewed OK."</pre></div>
     </li>
     <li class="step ">
      <p>Decline the request and give a reason:</p>
      <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> request decline 256 --message="Declined, because of missing semicolon."</pre></div>
     </li>
    </ul>
   </li></ol></div></div>
  <p>
   If the submit request has been accepted, the changes will be integrated into the
   home project <code class="uri">home:obsgeeko</code>.
  </p>
  <p>
   If the submit request has been declined, you can fix the issues and resubmit the
   package. When creating a new submit request, osc will prompt to
   supersede the previous request.
  </p>
 </div>

 <div class="sect1 " id="sec.obsbg.uc.install-from-obs"><div class="titlepage"><div><div><h2 class="title" id="sec.obsbg.uc.install-from-obs"><span class="number">10 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Installing Packages from OBS</span> <a title="Permalink" class="permalink" href="art.obs.bg.html#sec.obsbg.uc.install-from-obs">#</a></h2></div></div></div>
  
  <p>
   OBS provides a place containing all the distribution-specific and
   architecture-specific versions
   of successfully built packages. When you create a package
   in your OBS home project, all successfully built packages appear
   under the <code class="uri">https://download.opensuse.org/repositories/home:/obsgeeko</code> URL.
  </p>
  <p>
   However, this is only true for the home project itself and manually created
   subprojects, but not for subprojects created as a result of branching a
   package. Branched projects are not published by default.
   If you need the build results, download the binaries manually with
   <code class="command">osc getbinaries</code>. 
  </p>
  <p>
   For example, if you have enabled the openSUSE Tumbleweed distribution,
   all packages for openSUSE Tumbleweed will be published at
   <code class="uri">https://download.opensuse.org/repositories/home:/obsgeeko/openSUSE_Tumbleweed</code>. This <span class="emphasis"><em>download
   repository</em></span> is used as an installation source for Zypper or YaST.
  </p>
  <p>To install the <span class="package ">my-first-obs-package</span> package from your home project,
  use the following steps:</p>
  <div class="procedure "><div class="procedure-contents"><ol class="procedure" type="1"><li class="step " id="st.obsbg.uc.install-from-obs.repourls">
    <p>Inside your working directory, determine the download repository
     URLs:</p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt user">geeko &gt; </code><code class="command">osc</code> repourls
https://download.opensuse.org/repositories/home:/obsgeeko/openSUSE_Tumbleweed/home:obsgeeko.repo
https://download.opensuse.org/repositories/home:/obsgeeko/openSUSE_42.2/home:obsgeeko.repo</pre></div>
   </li><li class="step ">
    <p>Copy the desired URL of your preferred distribution. In our case, that
     is the line containing <code class="systemitem">openSUSE_Tumbleweed</code>.</p>
   </li><li class="step " id="st.obsbg.uc.install-from-obs.zypperar">
    <p>Use <code class="command">zypper</code> and add the copied URL:
    </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">zypper</code> addrepo https://download.opensuse.org/repositories/home:/obsgeeko/openSUSE_Tumbleweed/home:obsgeeko.repo</pre></div>
    <p>
     When prompted, accept the GPG key of the download repository.</p>
   </li><li class="step " id="st.obsbg.install">
    <p>Install the package:</p>
    <div class="verbatim-wrap"><pre class="screen"><code class="prompt root">root # </code><code class="command">zypper</code> install my-first-obs-package</pre></div>
   </li></ol></div></div>
  <p>
   To update the package again, run <a class="xref" href="art.obs.bg.html#st.obsbg.install" title="Step 4">Step 4</a>.
   You do not need to execute
   <a class="xref" href="art.obs.bg.html#st.obsbg.uc.install-from-obs.repourls" title="Step 1">Step 1</a>, as the
   repository is already configured in your system.
  </p>
 </div>

 <div class="sect1 " id="sec.obsbg.cheatsheet"><div class="titlepage"><div><div><h2 class="title" id="sec.obsbg.cheatsheet"><span class="number">11 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Other Useful <code class="command">osc</code> Commands</span> <a title="Permalink" class="permalink" href="art.obs.bg.html#sec.obsbg.cheatsheet">#</a></h2></div></div></div>
  
  <p>
   The following list gives you a short overview of frequently used <code class="command">osc</code>
   subcommands that were not mentioned in this guide. For an
   overview of their syntax, use
   <code class="command">osc <em class="replaceable ">SUBCOMMAND</em> --help</code>.
  </p>
  <div class="variablelist "><dl class="variablelist"><dt id="id-1.4.3.13.3.1"><span class="term "><code class="command">osc diff</code></span></dt><dd>
     <p>Generates a diff, comparing local changes against the remote
      OBS project.</p>
    </dd><dt id="id-1.4.3.13.3.2"><span class="term "><code class="command">osc list</code></span></dt><dd>
     <p>Shows source or binaries on an OBS server.</p>
    </dd><dt id="id-1.4.3.13.3.3"><span class="term "><code class="command">osc prjresults</code></span></dt><dd>
     <p>Shows project-wide build results.</p>
    </dd><dt id="id-1.4.3.13.3.4"><span class="term "><code class="command">osc status</code></span></dt><dd>
     <p>Shows the status of files in your working directory</p>
    </dd></dl></div>
 </div>
</div></div><div class="page-bottom"><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2019 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>