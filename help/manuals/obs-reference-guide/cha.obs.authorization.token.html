<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Authorization | Reference Guide</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 2.4.0 using SUSE XSL Stylesheets 2.0.8 (based on DocBook XSL Stylesheets 1.78.1) - chunked" /><meta name="book-title" content="Reference Guide" /><meta name="chapter-title" content="Chapter 14. Authorization" /><link rel="home" href="index.html" title="OBS Documentation" /><link rel="up" href="book.obs-reference-guide.html" title="Reference Guide" /><link rel="prev" href="cha.obs.build_preinstall.html" title="Chapter 13. Building Preinstall Images" /><link rel="next" href="cha.obs.qa_hooks.html" title="Chapter 15. Quality Assurance(QA) Hooks" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="offline js-off"><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="Reference Guide"><span class="book-icon">Reference Guide</span></a><span> › </span><a class="crumb" href="cha.obs.authorization.token.html">Authorization</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Reference Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="bk04pr01.html"><span class="number"> </span><span class="name">About this Guide</span></a></li><li class="inactive"><a href="cha.obs.architecture.html"><span class="number">1 </span><span class="name">OBS Architecture</span></a></li><li class="inactive"><a href="cha.obs.concepts.html"><span class="number">2 </span><span class="name">OBS Concepts</span></a></li><li class="inactive"><a href="cha.obs.build_process.html"><span class="number">3 </span><span class="name">Build Process</span></a></li><li class="inactive"><a href="cha.obs.source_management.html"><span class="number">4 </span><span class="name">Source Management</span></a></li><li class="inactive"><a href="cha.obs.request_and_review_ystem.html"><span class="number">5 </span><span class="name">Request And Review System</span></a></li><li class="inactive"><a href="cha.obs.image_templates.html"><span class="number">6 </span><span class="name">Image Templates</span></a></li><li class="inactive"><a href="cha.obs.multibuild.html"><span class="number">7 </span><span class="name">Multiple Build Description File Handling</span></a></li><li class="inactive"><a href="cha.obs.maintenance_setup.html"><span class="number">8 </span><span class="name">Maintenance Support</span></a></li><li class="inactive"><a href="cha.obs.binary_tracking.html"><span class="number">9 </span><span class="name">Binary Package Tracking</span></a></li><li class="inactive"><a href="cha.obs.admin.html"><span class="number">10 </span><span class="name">Administration</span></a></li><li class="inactive"><a href="cha.obs.build_scheduling_and_dispatching.html"><span class="number">11 </span><span class="name">Scheduling and Dispatching</span></a></li><li class="inactive"><a href="cha.obs.build_job_constraints.html"><span class="number">12 </span><span class="name">Build Job Constraints</span></a></li><li class="inactive"><a href="cha.obs.build_preinstall.html"><span class="number">13 </span><span class="name">Building Preinstall Images</span></a></li><li class="inactive"><a href="cha.obs.authorization.token.html"><span class="number">14 </span><span class="name">Authorization</span></a></li><li class="inactive"><a href="cha.obs.qa_hooks.html"><span class="number">15 </span><span class="name">Quality Assurance(QA) Hooks</span></a></li><li class="inactive"><a href="cha.obs.factory.html"><span class="number">16 </span><span class="name">openSUSE Factory</span></a></li><li class="inactive"><a href="obs.glossary.html"><span class="number"> </span><span class="name">Glossary</span></a></li><li class="inactive"><a href="bk04apa.html"><span class="number">A </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 13. Building Preinstall Images" href="cha.obs.build_preinstall.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 15. Quality Assurance(QA) Hooks" href="cha.obs.qa_hooks.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="Reference Guide"><span class="book-icon">Reference Guide</span></a><span> › </span><a class="crumb" href="cha.obs.authorization.token.html">Authorization</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 13. Building Preinstall Images" href="cha.obs.build_preinstall.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 15. Quality Assurance(QA) Hooks" href="cha.obs.qa_hooks.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class=""><div class="documentation"><div class="chapter " id="cha.obs.authorization.token"><div class="titlepage"><div><div><h1 class="title"><span class="number">14 </span><span class="name">Authorization</span> </h1></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha.obs.authorization.token.html#idm139773528871184"><span class="number">14.1 </span><span class="name">OBS Authorization Methods</span></a></span></dt><dt><span class="sect1"><a href="cha.obs.authorization.token.html#idm139773528865008"><span class="number">14.2 </span><span class="name">OBS Token Authorization</span></a></span></dt></dl></div></div>
 
 

 <div class="sect1 " id="idm139773528871184"><div class="titlepage"><div><div><h2 class="title" id="idm139773528871184"><span class="number">14.1 </span><span class="name">OBS Authorization Methods</span> <a title="Permalink" class="permalink" href="cha.obs.authorization.token.html#idm139773528871184">#</a></h2></div></div></div>
  
  <p> Each package is signed with a PGP key to allow checking its integrity
   on user's machines. </p>
  <div class="sect2 " id="idm139773528869920"><div class="titlepage"><div><div><h3 class="title" id="idm139773528869920"><span class="number">14.1.1 </span><span class="name">Default Mode</span> <a title="Permalink" class="permalink" href="cha.obs.authorization.token.html#idm139773528869920">#</a></h3></div></div></div>
   
   <p> OBS provides its own user database which can also store a password.
    The authentication to the API happens via HTTP BASIC AUTH. See the API
    documentation to find out how to create, modify or delete user data. Also a
    call for changing the password exists. </p>
  </div>
  <div class="sect2 " id="idm139773528868192"><div class="titlepage"><div><div><h3 class="title" id="idm139773528868192"><span class="number">14.1.2 </span><span class="name">Proxy Mode</span> <a title="Permalink" class="permalink" href="cha.obs.authorization.token.html#idm139773528868192">#</a></h3></div></div></div>
   
   <p> The proxy mode can be used for esp. secured instances, where the OBS
    web server shall not get connected to the network directly. There are
    authentication proxy products out there which do the authentication and
    send the user name via an HTTP header to OBS. This also has the advantage
    that the user password never reaches OBS. </p>
  </div>
  <div class="sect2 " id="idm139773528866544"><div class="titlepage"><div><div><h3 class="title" id="idm139773528866544"><span class="number">14.1.3 </span><span class="name">LDAP Mode</span> <a title="Permalink" class="permalink" href="cha.obs.authorization.token.html#idm139773528866544">#</a></h3></div></div></div>
   
   <p> LDAP authentication code is still part of OBS, but due to the lack of
    any test cases it is currently not recommended to use it. </p>
  </div>
 </div>
 <div class="sect1 " id="idm139773528865008"><div class="titlepage"><div><div><h2 class="title" id="idm139773528865008"><span class="number">14.2 </span><span class="name">OBS Token Authorization</span> <a title="Permalink" class="permalink" href="cha.obs.authorization.token.html#idm139773528865008">#</a></h2></div></div></div>
  
  <p> OBS provides a mechanism to create tokens for specific operations.
   This can be used to allow certain operations in the name of a user to
   others. This is esp. useful when integrating external infrastructure. The
   create token should be kept secret by default, but it can also be revoked at
   any time if it became obsolete or leaked. </p>
  <div class="sect2 " id="idm139773528863376"><div class="titlepage"><div><div><h3 class="title" id="idm139773528863376"><span class="number">14.2.1 </span><span class="name">Managing User Tokens</span> <a title="Permalink" class="permalink" href="cha.obs.authorization.token.html#idm139773528863376">#</a></h3></div></div></div>
   
   <p> Tokens always belong to a user. A list of active tokens can be viewed
    using </p>
   <div class="verbatim-wrap"><pre class="screen"><code class="command">osc token</code></pre></div>
   <div class="verbatim-wrap"><pre class="screen"><code class="command">osc token --delete &lt;TOKEN&gt;</code></pre></div>
  </div>
  <div class="sect2 " id="idm139773528860720"><div class="titlepage"><div><div><h3 class="title" id="idm139773528860720"><span class="number">14.2.2 </span><span class="name">Executing a Source Service</span> <a title="Permalink" class="permalink" href="cha.obs.authorization.token.html#idm139773528860720">#</a></h3></div></div></div>
   
   <p> A token can be used to execute a source service. The source service
    has to be setup for the package first, check the source service chapter for
    this. A typical example is to update sources of a package from git. A
    source service for that can be setup with </p>
   <div class="verbatim-wrap"><pre class="screen"><code class="command">osc</code> add git://....</pre></div>
   <p> The best way to create a token is bind it to a specific package. The
    advantage is that the operation is limited to that package, so less bad
    things can happen when the token leaks. </p>
   <div class="verbatim-wrap"><pre class="screen"><code class="command">osc</code> token --create &lt;PROJECT&gt; &lt;PACKAGE&gt;</pre></div>
   <p> Also, you do not need to specify the package at execution time. But
    keep in mind that such form only works when you run it on an as checkout of
    a package. Both commands below do the same thing but in different way: </p>
   <div class="verbatim-wrap"><pre class="screen"><code class="command">osc</code> token --trigger &lt;TOKEN&gt;</pre></div>
   <div class="verbatim-wrap"><pre class="screen"><code class="command">osc</code> api -X POST /trigger/runservice?token=&lt;TOKEN&gt;</pre></div>
   <p> A token can be registered as generic token, means allowing to execute
    all source services in OBS if the user has permissions. You can create such
    a token by skipping project/package on creation command: </p>
   <div class="verbatim-wrap"><pre class="screen"><code class="command">osc</code> token --create</pre></div>
   <p> In this case you forced to specify project/package when using such a
    token. On other hand you not limited from where two execute it. Again two
    examples doing same thing: </p>
   <div class="verbatim-wrap"><pre class="screen"><code class="command">osc</code> token --trigger &lt;TOKEN&gt; &lt;PROJECT&gt; &lt;PACKAGE&gt;</pre></div>
   <div class="verbatim-wrap"><pre class="screen"><code class="command">curl</code> -H "Authorization: Token &lt;TOKEN&gt;" -X POST /trigger/runservice?project=&lt;PROJECT&gt;&amp;package=&lt;PACKAGE&gt;</pre></div>
   <p> You can also limit the token to a specific package. The advantage is
    that the operation is limited to that package, so less bad things can
    happen when the token leaks. Also you do not need to specify the package on
    execution time. Create and execute it with </p>
   <div class="verbatim-wrap"><pre class="screen"><code class="command">osc</code> token --create &lt;PROJECT&gt; &lt;PACKAGE&gt;</pre></div>
   <div class="verbatim-wrap"><pre class="screen"><code class="command">osc</code> token --trigger &lt;TOKEN&gt;</pre></div>
   <div class="verbatim-wrap"><pre class="screen"><code class="command">curl</code> -H "Authorization: Token &lt;TOKEN&gt;" -X POST /trigger/runservice</pre></div>
  </div>
  
 </div>
</div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha.obs.qa_hooks.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 15 </span>Quality Assurance(QA) Hooks</span></a><a class="nav-link" href="cha.obs.build_preinstall.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 13 </span>Building Preinstall Images</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2018 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>