<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>OBS Concepts | Reference Guide</title><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" /><link rel="stylesheet" type="text/css" href="static/css/style.css" /><link rel="stylesheet" type="text/css" href="static/css/highlight.css" /><meta name="generator" content="DAPS 3.0.0 (https://opensuse.github.io/daps) using SUSE XSL Stylesheets 2.0.13 (based on DocBook XSL Stylesheets snapshot) - chunked" /><meta name="book-title" content="Reference Guide" /><meta name="chapter-title" content="Chapter 2. OBS Concepts" /><link rel="home" href="index.html" title="OBS Documentation" /><link rel="up" href="book.obs-reference-guide.html" title="Reference Guide" /><link rel="prev" href="cha.obs.architecture.html" title="Chapter 1. OBS Architecture" /><link rel="next" href="cha.obs.build_process.html" title="Chapter 3. Build Process" /><script type="text/javascript">

var protocol = window.location.protocol.toLowerCase();
if ( protocol != 'file:' ) {
  var agent = navigator.userAgent.toLowerCase();
  var wanted = ( protocol == 'https:') ? 'https' : 'http';
  var file = 'fonts.css';
  document.write('<link rel="stylesheet" type="text/css" href="' + wanted + '://static.opensuse.org/fonts/'+ file +'"></link>');
}
else {
   document.write('<link rel="stylesheet" type="text/css" href="static/css/fonts-onlylocal.css"></link>');
}

</script><noscript><link rel="stylesheet" type="text/css" href="http://static.opensuse.org/fonts/fonts.css" /></noscript><script src="static/js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="static/js/script.js" type="text/javascript"></script><script src="static/js/highlight.min.js" type="text/javascript"></script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="offline js-off"><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-navigation">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><div id="_outer-wrap"><div id="_white-bg"><div id="_header"><div id="_logo"><img src="static/images/logo.png" alt="Logo" /></div><div class="crumbs"><a class="book-link" href="index.html" title="Reference Guide"><span class="book-icon">Reference Guide</span></a><span> › </span><a class="crumb" href="cha.obs.concepts.html">OBS Concepts</a></div><div class="clearme"></div></div></div><div id="_toolbar-wrap"><div id="_toolbar"><div id="_toc-area" class="inactive"><a id="_toc-area-button" class="tool" title="Contents" accesskey="c" href="index.htmlindex.html"><span class="tool-spacer"><span class="toc-icon">Contents</span><span class="clearme"></span></span><span class="tool-label">Contents</span></a><div class="active-contents bubble-corner"></div><div class="active-contents bubble"><div class="bubble-container"><h6>Reference Guide</h6><div id="_bubble-toc"><ol><li class="inactive"><a href="bk04pr01.html"><span class="number"> </span><span class="name">About this Guide</span></a></li><li class="inactive"><a href="cha.obs.architecture.html"><span class="number">1 </span><span class="name">OBS Architecture</span></a></li><li class="inactive"><a href="cha.obs.concepts.html"><span class="number">2 </span><span class="name">OBS Concepts</span></a></li><li class="inactive"><a href="cha.obs.build_process.html"><span class="number">3 </span><span class="name">Build Process</span></a></li><li class="inactive"><a href="cha.obs.source_management.html"><span class="number">4 </span><span class="name">Source Management</span></a></li><li class="inactive"><a href="cha.obs.request_and_review_ystem.html"><span class="number">5 </span><span class="name">Request And Review System</span></a></li><li class="inactive"><a href="cha.obs.image_templates.html"><span class="number">6 </span><span class="name">Image Templates</span></a></li><li class="inactive"><a href="cha.obs.multibuild.html"><span class="number">7 </span><span class="name">Multiple Build Description File Handling</span></a></li><li class="inactive"><a href="cha.obs.maintenance_setup.html"><span class="number">8 </span><span class="name">Maintenance Support</span></a></li><li class="inactive"><a href="cha.obs.binary_tracking.html"><span class="number">9 </span><span class="name">Binary Package Tracking</span></a></li><li class="inactive"><a href="cha.obs.admin.html"><span class="number">10 </span><span class="name">Administration</span></a></li><li class="inactive"><a href="cha.obs.build_scheduling_and_dispatching.html"><span class="number">11 </span><span class="name">Scheduling and Dispatching</span></a></li><li class="inactive"><a href="cha.obs.build_job_constraints.html"><span class="number">12 </span><span class="name">Build Job Constraints</span></a></li><li class="inactive"><a href="cha.obs.build_preinstall.html"><span class="number">13 </span><span class="name">Building Preinstall Images</span></a></li><li class="inactive"><a href="cha.obs.authorization.token.html"><span class="number">14 </span><span class="name">Authorization</span></a></li><li class="inactive"><a href="cha.obs.qa_hooks.html"><span class="number">15 </span><span class="name">Quality Assurance(QA) Hooks</span></a></li><li class="inactive"><a href="cha.obs.factory.html"><span class="number">16 </span><span class="name">openSUSE Factory</span></a></li><li class="inactive"><a href="obs.glossary.html"><span class="number"> </span><span class="name">Glossary</span></a></li><li class="inactive"><a href="bk04apa.html"><span class="number">A </span><span class="name">GNU Licenses</span></a></li></ol></div><div class="clearme"></div></div></div></div><div id="_nav-area" class="inactive"><div class="tool"><span class="nav-inner"><span class="tool-label">Navigation</span><a accesskey="p" class="tool-spacer" title="Chapter 1. OBS Architecture" href="cha.obs.architecture.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 3. Build Process" href="cha.obs.build_process.html"><span class="next-icon">→</span></a></span></div></div></div></div><div id="_fixed-header-wrap" class="inactive"><div id="_fixed-header"><div class="crumbs"><a class="book-link" href="index.html" title="Reference Guide"><span class="book-icon">Reference Guide</span></a><span> › </span><a class="crumb" href="cha.obs.concepts.html">OBS Concepts</a></div><div class="buttons"><a class="top-button button" href="#">Top</a><div class="button"><a accesskey="p" class="tool-spacer" title="Chapter 1. OBS Architecture" href="cha.obs.architecture.html"><span class="prev-icon">←</span></a><a accesskey="n" class="tool-spacer" title="Chapter 3. Build Process" href="cha.obs.build_process.html"><span class="next-icon">→</span></a></div><div class="clearme"></div></div><div class="clearme"></div></div></div><div id="_content" class=""><div class="documentation"><div class="chapter " id="cha.obs.concepts"><div class="titlepage"><div><div><h1 class="title"><span class="number">2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">OBS Concepts</span> </h1></div></div></div><div class="line"><div class="toc"><dl><dt><span class="sect1"><a href="cha.obs.concepts.html#id-1.7.6.4"><span class="number">2.1 </span><span class="name">Project Organization</span></a></span></dt><dt><span class="sect1"><a href="cha.obs.concepts.html#id-1.7.6.5"><span class="number">2.2 </span><span class="name">The OBS Interconnect</span></a></span></dt><dt><span class="sect1"><a href="cha.obs.concepts.html#concept_dod"><span class="number">2.3 </span><span class="name">Download on Demand Repositories (DoD)</span></a></span></dt><dt><span class="sect1"><a href="cha.obs.concepts.html#concept_scm_integration"><span class="number">2.4 </span><span class="name">Integrating External Source Repositories</span></a></span></dt></dl></div></div>
 
 
 <p> We describe here the high-level concepts: how Open Build Service is
  designed, manages its content and is supposed to work. </p>

 <div class="sect1 " id="id-1.7.6.4"><div class="titlepage"><div><div><h2 class="title" id="id-1.7.6.4"><span class="number">2.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Project Organization</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.4">#</a></h2></div></div></div>
  
  <p> All sources and binaries which are hosted inside of OBS are organized
   into projects. A project is the container defining a larger task. It defines
   who is working there. </p>
  <div class="sect2 " id="id-1.7.6.4.3"><div class="titlepage"><div><div><h3 class="title" id="id-1.7.6.4.3"><span class="number">2.1.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Project Metadata</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.4.3">#</a></h3></div></div></div>
   
   <p> A project is configured in the project
     <code class="command">/source/$PROJECT/_meta</code> path. It can be edited in the
    web interface using the <code class="command">RAW Config</code> tab or via command
    line with </p>
   <div class="verbatim-wrap"><pre class="screen"><code class="command">osc meta prj -e $PROJECT</code></pre></div> 
   <p>This file contains: </p>
   <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
     <p> Generic description data in <code class="command">title</code> and
       <code class="command">description</code> elements. </p>
    </li><li class="listitem ">
     <p> An ACL list of users and groups connected with a role. The
       <code class="command">maintainer</code> role defines the list of users permitted
      to commit changes to the project. </p>
    </li><li class="listitem ">
     <p> A number of flags controlling the build and publishing process
      and possible read access protections. </p>
    </li><li class="listitem ">
     <p> A list of repositories to be created. This list defines what
      other repositories should be used, which architectures shall be built and
      build job scheduling parameters. </p>
    </li></ul></div>
   <p> The following flags can be used to control the behavior of a package
    or project. Most of them can also be limited to specified repositories or
    architectures. </p>
   <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
     <p><code class="command">build</code> defines whether package sources should
      get built. If enabled, it signals the scheduler to trigger server-side
      builds based on events like source changes, changes of packages used in
      the build environment or manual rebuild triggers. A local build via CLI
      is possible independent of this flag. Default is enabled. </p>
    </li><li class="listitem ">
     <p><code class="command">publish</code> can be used to enable or disable
      publishing the build result as repository. This happens after an entire
      repository has finished building for an architecture. A publish also gets
      triggered when the publish flag is enabled after a repository finishes
      the build. Default is enabled. </p>
    </li><li class="listitem ">
     <p><code class="command">debuginfo</code> can be used to modify the build
      process to create debuginfo data along with the package build for later
      debugging purposes. Changing this flag does not trigger rebuilds, it just
      affects the next build. Default is disabled. </p>
    </li><li class="listitem ">
     <p><code class="command">useforbuild</code> is used to control if a built
      result shall be copied to the build pool. This means it will get used for
      other builds in their build environment. When this is disabled, the build
      has no influence on builds of other packages using this repository. In
      case a former build exists the old binaries will be used. Disabling this
      flag also means that "wipe" commands to remove binary files will have no
      effect on the build pool. Changing this flag does not trigger rebuilds,
      it just affects the next build. Default is enabled. </p>
    </li><li class="listitem ">
     <p><code class="command">access</code> flag can be used to hide an entire
      project. This includes binaries and sources. It can only be used at
      project creation time and can just be enabled (making it public again)
      afterwards. This flag can only be used on projects. Default is enabled.
     </p>
    </li><li class="listitem ">
     <p><code class="command">sourceaccess</code> flag can be used to hide the
      sources, but still show the existence of a project or package. This also
      includes debug packages in case the distribution is supporting this
      correctly. This flag can only be used at package creation time. There is
      no code yet which checks for possible references to this package. Default
      is enabled. </p>
    </li><li class="listitem ">
     <p><code class="command">downloadbinary</code> permission still exists like
      before. However, unlike "access" and "sourceaccess" this is not a
      security feature. It is just a convenience feature, which makes it
      impossible to get the binaries via the API directly. But it is still
      possible to get the binaries via build time in any case. Default is
      enabled. </p>
    </li></ul></div>
  </div>
  <div class="sect2 " id="id-1.7.6.4.4"><div class="titlepage"><div><div><h3 class="title" id="id-1.7.6.4.4"><span class="number">2.1.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Project Build Configuration</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.4.4">#</a></h3></div></div></div>
   
   <p> A project is configured in the project
     <code class="command">/source/$PROJECT/_config</code> path. It can be edited in web
    interface in the <code class="command">Project Config</code> tab or via one of the
    following command lines </p>
    <div class="verbatim-wrap"><pre class="screen"><code class="command">osc meta prjconf -e $PROJECT</code>
<code class="command">osc co $PROJECT _project</code></pre></div>
    <p>
     This file contains information on how to set up a build environment.
    </p>
  </div>
  <div class="sect2 " id="id-1.7.6.4.5"><div class="titlepage"><div><div><h3 class="title" id="id-1.7.6.4.5"><span class="number">2.1.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Project Build Macro Configuration</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.4.5">#</a></h3></div></div></div>
   
   <p> The macro configuration is part of the build configuration in
     <code class="command">/source/$PROJECT/_config</code>. It can be added at the end
    after a <code class="command">Macros:</code> line. </p>
  </div>
  <div class="sect2 " id="id-1.7.6.4.6"><div class="titlepage"><div><div><h3 class="title" id="id-1.7.6.4.6"><span class="number">2.1.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">An OBS Package</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.4.6">#</a></h3></div></div></div>
   
   <p> An OBS Package is a sub-namespace below a project. It contains the
    specification of a single package build for all specified repositories.
   </p>
  </div>
 </div>

 

 <div class="sect1 " id="id-1.7.6.5"><div class="titlepage"><div><div><h2 class="title" id="id-1.7.6.5"><span class="number">2.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The OBS Interconnect</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.5">#</a></h2></div></div></div>
  
  <p> The OBS interconnect is a mechanism to connect two OBS instances. All
   content, including sources and binary build results, will be available in
   the connecting instance. Unlike other methods the instances will also notify
   each other about changes.
   
  </p>
 </div>

 <div class="sect1 " id="concept_dod"><div class="titlepage"><div><div><h2 class="title" id="concept_dod"><span class="number">2.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Download on Demand Repositories (DoD)</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#concept_dod">#</a></h2></div></div></div>
 
 <div class="sect2 " id="id-1.7.6.6.2"><div class="titlepage"><div><div><h3 class="title" id="id-1.7.6.6.2"><span class="number">2.3.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Motivation</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.6.2">#</a></h3></div></div></div>
  
  <p> In a DoD repository external software repositories can be configured
   which are used for dependency resolution and where packages will be
   downloaded at build time. A DoD repository has some main advantages in
   comparison to binary import projects: </p>
  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
    <p> less disk usage as only really required packages will be downloaded
    </p>
   </li><li class="listitem ">
    <p> automatic package updates when new upstream releases are available
    </p>
   </li><li class="listitem ">
    <p> simple to configure in project meta with no for shell access to repo
     servers </p>
   </li></ul></div>
  <p> In download repotypes where package checksums can be verified (e.g.
   susetags, rpmmd and deb), we recommend that you use a mirror server URL in
   &lt;download&gt; in order to reduce traffic on the master server and
   configure a &lt;master&gt; with an <code class="command">https</code> url and a
    <code class="command">sslfinger</code> in order to avoid man in the middle attacks by
   peer verification. </p>
 </div>
 <div class="sect2 " id="id-1.7.6.6.3"><div class="titlepage"><div><div><h3 class="title" id="id-1.7.6.6.3"><span class="number">2.3.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">XML Document Hierarchy</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.6.3">#</a></h3></div></div></div>
  
  <div class="verbatim-wrap"><pre class="screen">&lt;project&gt;
  &lt;repository&gt;
    &lt;download&gt;
      &lt;master/&gt; (optional)
      &lt;pubkey/&gt; (optional)
    &lt;/download&gt;
  &lt;/repository&gt;
&lt;/project&gt;</pre></div>
 </div>
 <div class="sect2 " id="id-1.7.6.6.4"><div class="titlepage"><div><div><h3 class="title" id="id-1.7.6.6.4"><span class="number">2.3.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The Daemon</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.6.4">#</a></h3></div></div></div>
  
  <p> The bs_dodup daemon periodically checks for new metadata in remote
   repositories. This daemon can be enabled for startup with the command</p>
   <div class="verbatim-wrap"><pre class="screen">systemctl enable obsdodup.service</pre></div>
   <p> and can be started with</p>
   <div class="verbatim-wrap"><pre class="screen">systemctl start obsdodup.service</pre></div>
 </div>
 <div class="sect2 " id="id-1.7.6.6.5"><div class="titlepage"><div><div><h3 class="title" id="id-1.7.6.6.5"><span class="number">2.3.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The <code class="sgmltag-element">download</code> Element</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.6.5">#</a></h3></div></div></div>
  
  <p>mandatory attributes:</p>
  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
    <p> arch </p>
   </li><li class="listitem ">
    <p> url </p>
   </li><li class="listitem ">
    <p> repotype </p>
   </li></ul></div>
 </div>
 <div class="sect2 " id="id-1.7.6.6.6"><div class="titlepage"><div><div><h3 class="title" id="id-1.7.6.6.6"><span class="number">2.3.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The <code class="sgmltag-element">master</code> Subelement</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.6.6">#</a></h3></div></div></div>
  
  <p> The <code class="command">&lt;master&gt;</code> tag as shown in the rpmmd
   example below is optional but strongly recommended for security reasons. </p>
  <p> Verification is supported in the following repotypes</p> 
   <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
     <p> susetags </p>
    </li><li class="listitem ">
     <p> rpmmd </p>
    </li><li class="listitem ">
     <p> deb </p>
    </li></ul></div>
  <p> This option could be defined by any valid URL (HTTP and HTTPS) to the
   origin of the repository but it is strongly recommended to use
    <code class="command">https</code> with a <code class="command">sslfingerprint</code> to
   bs_dodup possibility to verify its peer in order to avoid man-in-the-middle
   attacks. The download URL can be a mirror as we validate package checksums
   found in repo data. </p>
  <p> You can easily query the SSL fingerprint of a remote server with the
   following command:</p>
   <div class="verbatim-wrap"><pre class="screen">openssl s_client -connect &lt;host&gt;:&lt;port&gt; &lt; /dev/null 2&gt;/dev/null | openssl x509 -fingerprint -noout</pre></div>
 </div>
 <div class="sect2 " id="id-1.7.6.6.7"><div class="titlepage"><div><div><h3 class="title" id="id-1.7.6.6.7"><span class="number">2.3.6 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">The <code class="sgmltag-element">pubkey</code> Subelement</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.6.7">#</a></h3></div></div></div>
  
  <p> The pubkey element contains one or more GPG public keys in order to
   verify repository information but not packages. For an example, look at the
   repotype "deb" documentation below. </p>
 </div>
 <div class="sect2 " id="id-1.7.6.6.8"><div class="titlepage"><div><div><h3 class="title" id="id-1.7.6.6.8"><span class="number">2.3.7 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Repository Types</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.6.8">#</a></h3></div></div></div>
  
  
  <div class="sect3 " id="id-1.7.6.6.8.3"><div class="titlepage"><div><div><h4 class="title" id="id-1.7.6.6.8.3"><span class="number">2.3.7.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">YAST Sources (susetags)</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.6.8.3">#</a></h4></div></div></div>
   
   <p>
    <code class="command">Example:</code>
   </p>
   <div class="verbatim-wrap"><pre class="screen">&lt;project name="My::SuSE::CD"&gt;

  [...]

  &lt;repository name="standard"&gt;
    &lt;download arch="x86_64" url="http://mirror.example.org/path/to/iso" repotype="susetags" /&gt;
    &lt;download arch="i586" url="http://mirror.example.org/path/to/iso" repotype="susetags" /&gt;
    &lt;arch&gt;x86_64&lt;/arch&gt;
    &lt;arch&gt;i586&lt;/arch&gt;
  &lt;/repository&gt;
&lt;/project&gt;</pre></div>
  </div>
  <div class="sect3 " id="id-1.7.6.6.8.4"><div class="titlepage"><div><div><h4 class="title" id="id-1.7.6.6.8.4"><span class="number">2.3.7.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">RPM Sources (rpmmd)</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.6.8.4">#</a></h4></div></div></div>
   
   <p>
    <code class="command">Example:</code>
   </p>
   <div class="verbatim-wrap"><pre class="screen">&lt;project name="Fedora:Rawhide"&gt;

  [...]

  &lt;repository name="standard"&gt;
    &lt;download arch="x86_64" url="http://mirror.example.org/fedora/rawhide/x86_64/os" repotype="rpmmd"&gt;
      &lt;master url="https://master.example.org/whereever/fedora/rawhide/x86_64/os" sslfingerprint="sha256:0a64..0303"/&gt;
    &lt;/download&gt;
    &lt;download arch="i586" url="http://mirror.example.org/fedora/rawhide/i386/os" repotype="rpmmd"&gt;
      &lt;master url="https://master.example.org/whereever/fedora/rawhide/i386/os" sslfingerprint="sha256:0a64..0303"/&gt;
    &lt;/download&gt;
    &lt;arch&gt;x86_64&lt;/arch&gt;
    &lt;arch&gt;i586&lt;/arch&gt;
  &lt;/repository&gt;
&lt;/project&gt;</pre></div>

  </div>
  <div class="sect3 " id="id-1.7.6.6.8.5"><div class="titlepage"><div><div><h4 class="title" id="id-1.7.6.6.8.5"><span class="number">2.3.7.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Apt Repository (deb)</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.6.8.5">#</a></h4></div></div></div>
   
   <p> Apt supports two repository types, flat repositories and distribution
    repositories. </p>
   <p> The download url syntax for them is: </p>
   <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
     <p> &lt;baseurl&gt;/&lt;distribution&gt;/&lt;components&gt; </p>
    </li><li class="listitem ">
     <p> &lt;flat_url&gt;/.[/&lt;components&gt;] </p>
    </li></ul></div>
   <p> You can specify multiple components separated by a comma. </p>
   <p> An empty components string is parsed as "main". </p>
   <p>
    <code class="command">Example:</code>
   </p>
   <div class="verbatim-wrap"><pre class="screen">&lt;project name="Debian:8"&gt;

  [...]

  &lt;repository name="ga"&gt;
    &lt;download arch="x86_64" url="http://ftp.de.debian.org/debian/jessie/main" repotype="deb"&gt;
      &lt;pubkey&gt;
-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v1.4.12 (GNU/Linux)

[...]

      &lt;/pubkey&gt;
    &lt;/download&gt;
    &lt;download arch="i586" url="http://ftp.de.debian.org/debian/jessie/main" repotype="deb"&gt;
      &lt;pubkey&gt;
-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v1.4.12 (GNU/Linux)

[...]

      &lt;/pubkey&gt;
    &lt;/download&gt;
    &lt;arch&gt;x86_64&lt;/arch&gt;
    &lt;arch&gt;i586&lt;/arch&gt;
  &lt;/repository&gt;
&lt;/project&gt;</pre></div>
  </div>
  <div class="sect3 " id="id-1.7.6.6.8.6"><div class="titlepage"><div><div><h4 class="title" id="id-1.7.6.6.8.6"><span class="number">2.3.7.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Arch Repository (arch)</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.6.8.6">#</a></h4></div></div></div>
   
   <p> Be aware that there is currently no way to verify the origin of
    repository for Arch. </p>
   <p>
    <code class="command">Example:</code>
   </p>
   <div class="verbatim-wrap"><pre class="screen">&lt;project name="Arch:Core"&gt;

  [...]

  &lt;repository name="standard"&gt;
    &lt;download arch="x86_64" url="http://ftp5.gwdg.de/pub/linux/archlinux/core/os/x86_64" repotype="arch"/&gt;
    &lt;download arch="i586" url="http://ftp5.gwdg.de/pub/linux/archlinux/core/os/i686" repotype="arch"/&gt;
    &lt;arch&gt;x86_64&lt;/arch&gt;
    &lt;arch&gt;i586&lt;/arch&gt;
  &lt;/repository&gt;
&lt;/project&gt;</pre></div>
  </div>
  <div class="sect3 " id="id-1.7.6.6.8.7"><div class="titlepage"><div><div><h4 class="title" id="id-1.7.6.6.8.7"><span class="number">2.3.7.5 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Mandriva Repository (mdk)</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.6.8.7">#</a></h4></div></div></div>
   
   <p>
    <code class="command">Example:</code>
   </p>
   <div class="verbatim-wrap"><pre class="screen">&lt;project name="Mageia:5"&gt;

  [...]

  &lt;repository name="standard"&gt;
    &lt;download arch="x86_64" url="http://mirror.example.org/Mageia/distrib/5/x86_64/media/core/release" repotype="mdk"/&gt;
    &lt;download arch="i586" url="http://mirror.example.org/mirrors/Mageia/distrib/5/i586/media/core/release" repotype="mdk"/&gt;
    &lt;arch&gt;x86_64&lt;/arch&gt;
    &lt;arch&gt;i586&lt;/arch&gt;
  &lt;/repository&gt;
&lt;/project&gt;</pre></div>
  </div>
 </div>
</div>
 <div class="sect1 " id="concept_scm_integration"><div class="titlepage"><div><div><h2 class="title" id="concept_scm_integration"><span class="number">2.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Integrating External Source Repositories</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#concept_scm_integration">#</a></h2></div></div></div>
 
 <div class="sect2 " id="id-1.7.6.7.2"><div class="titlepage"><div><div><h3 class="title" id="id-1.7.6.7.2"><span class="number">2.4.1 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Motivation</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.7.2">#</a></h3></div></div></div>
  
  <p> This chapter makes some recommendations how upstream resources can be
   integrated into the build process. SCM stands for source control management.
   git, subversion or CVS are concrete implementations of an SCM. The OBS
   itself comes also with an own SCM, but this is only intended to manage the
   files needed for packaging. However, you can add references to external SCM
   systems. The source service system will mirror the sources and provide it to
   the build systems. OBS makes sure that you can access the sources of all
   builds also in the future, even when the upstream server delivers different
   or no content at all anymore. Using external SCM references has the
   following advantages: </p>
  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
    <p> It is documented where a source comes from and how to create the
     archive. </p>
   </li><li class="listitem ">
    <p> Working on the upstream sources can be done directly in local
     checkouts and changes can be tested via local builds before pushing to the
     SCM server. </p>
   </li><li class="listitem ">
    <p> The sources can be stored incrementally and need less storage on the
     server. </p>
   </li></ul></div>
 </div>
 <div class="sect2 " id="id-1.7.6.7.3"><div class="titlepage"><div><div><h3 class="title" id="id-1.7.6.7.3"><span class="number">2.4.2 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Creating an Reference to an External SCM</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.7.3">#</a></h3></div></div></div>
  
  <p> External references are defined in _service files. The file can look
   like this: </p>
  <div class="verbatim-wrap"><pre class="screen">&lt;services&gt;
  &lt;service name="obs_scm"&gt;
    &lt;param name="url"&gt;git://...&lt;/param&gt;
    &lt;param name="scm"&gt;git&lt;/param&gt;
  &lt;/service&gt;
  &lt;service name="tar" mode="buildtime"/&gt;
  &lt;service name="recompress" mode="buildtime"&gt;
    &lt;param name="file"&gt;*.tar&lt;/param&gt;
    &lt;param name="compression"&gt;xz&lt;/param&gt;
  &lt;/service&gt;
  &lt;service name="set_version" mode="buildtime" /&gt;
&lt;/services&gt;</pre></div>
  <p> The services do the following: </p>
  <div class="itemizedlist "><ul class="itemizedlist"><li class="listitem ">
    <p>
     <code class="systemitem">obs_scm</code>: mirrors the source. It stores it as a
     cpio archive, but for the build process this looks like a directory. It
     also stores additional information from the metadata to a file with
     obsinfo suffix. </p>
   </li><li class="listitem ">
    <p>
     <code class="systemitem">tar</code>: creates a tar file from the directory
    </p>
   </li><li class="listitem ">
    <p>
     <code class="systemitem">recompress</code>: applies a compression on the tar file
    </p>
   </li><li class="listitem ">
    <p>
     <code class="systemitem">set_version</code>: reads the version from the obsinfo
     file and adapts the build descriptions to it. </p>
   </li></ul></div>
  <p> Note that only the first service (<code class="systemitem">obs_scm</code>)
   runs on the OBS server. The other services run during the build process.
   They can also be replaced by any user by providing alternative
   implementations of them, or by writing their own service from scratch.
  </p>
 </div>
 <div class="sect2 " id="id-1.7.6.7.4"><div class="titlepage"><div><div><h3 class="title" id="id-1.7.6.7.4"><span class="number">2.4.3 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Working with Local Checkouts</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.7.4">#</a></h3></div></div></div>
  
  <p> Using <code class="command">osc build</code> in any package with such a
   definition will do the same process locally. The only difference is that you
   get a local subdirectory with the SCM content. You can go inside and work as
   you are used to. Any changes inside will be used for your next local build,
   whether they were pushed to the upstream server or not. However, you need to
   push it upstream when you let the OBS server re-fetch the changes from
   upstream. The only way out would be to set the
    <code class="systemitem">obs_scm</code> service to mode disabled and upload your
   local archive. </p>
 </div>
 <div class="sect2 " id="id-1.7.6.7.5"><div class="titlepage"><div><div><h3 class="title" id="id-1.7.6.7.5"><span class="number">2.4.4 </span><span xmlns:dm="urn:x-suse:ns:docmanager" class="name">Managing Build Recipes in a SCM</span> <a title="Permalink" class="permalink" href="cha.obs.concepts.html#id-1.7.6.7.5">#</a></h3></div></div></div>
  
  <p> The <code class="systemitem">obs_scm</code> service allows you to export
   files next to the archive. You can specify one or more files using the
    <code class="literal">extract</code> parameter. Use it for your build recipe
   files. </p>
 </div>
</div>

 

 
</div></div><div class="page-bottom"><div id="_bottom-navigation"><a class="nav-link" href="cha.obs.build_process.html"><span class="next-icon">→</span><span class="nav-label"><span class="number">Chapter 3 </span>Build Process</span></a><a class="nav-link" href="cha.obs.architecture.html"><span class="prev-icon">←</span><span class="nav-label"><span class="number">Chapter 1 </span>OBS Architecture</span></a></div><div id="_share-print"><div class="online-contents share"><strong>Share this page: </strong><span class="share-buttons"><span id="_share-fb" class="bottom-button">Facebook</span><span class="spacer"> • </span><span id="_share-gp" class="bottom-button">Google+</span><span class="spacer"> • </span><span id="_share-tw" class="bottom-button">Twitter</span><span class="spacer"> • </span><span id="_share-mail" class="bottom-button">E-Mail</span></span></div><div class="print"><span id="_print-button" class="bottom-button">Print this page</span></div><div class="clearme"></div></div></div></div><div id="_inward"></div></div><div id="_footer-wrap"><div id="_footer"><p>©
        2019 
        SUSE</p><ul><li><a href="http://www.suse.com/company/careers/" target="_top">Careers</a></li><li><a href="http://www.suse.com/company/legal/" target="_top">Legal</a></li><li><a href="http://www.suse.com/company/" target="_top">About</a></li><li><a href="http://www.suse.com/ContactsOffices/contacts_offices.jsp" target="_top">Contact Us</a></li></ul></div></div></body></html>